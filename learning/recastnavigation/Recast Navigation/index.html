<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="XqWEZ-KjvQT4IfXzxYvH-PEc--_zN6GqthY2jBsqOs4"><meta name="msvalidate.01" content="4E28E3FDD5912EBBB84869B17359650D"><meta name="baidu-site-verification" content="code-dwpSTDBLS2"><link rel="alternate" type="application/rss+xml" title="鑫酱" href="https://hakuya.me/rss.xml"><link rel="alternate" type="application/atom+xml" title="鑫酱" href="https://hakuya.me/atom.xml"><link rel="alternate" type="application/json" title="鑫酱" href="https://hakuya.me/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Recast Navigation"><link rel="canonical" href="https://hakuya.me/learning/recastnavigation/Recast%20Navigation/"><title>Recast Navigation - 导航网格 - 学习 | 个人博客 = 鑫酱 = 笔记本</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Recast Navigation</h1><div class="meta"><span class="item" title="创建时间：2021-10-08 15:47:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-10-08T15:47:00+08:00">2021-10-08</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>23k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>21 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">个人博客</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (24).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (14).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (13).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper_1.jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (26).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (15).jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learning/" itemprop="item" rel="index" title="分类于 学习"><span itemprop="name">学习</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learning/recastnavigation/" itemprop="item" rel="index" title="分类于 导航网格"><span itemprop="name">导航网格</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://hakuya.me/learning/recastnavigation/Recast%20Navigation/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="鑫酱(●'◡'●)"><meta itemprop="description" content="笔记本, 整天摸鱼，却妄想拯救世界的技术宅"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="鑫酱"></span><div class="body md" itemprop="articleBody"><div class="note info"><p>以下为个人学习笔记整理，源项目<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JlY2FzdG5hdmlnYXRpb24vcmVjYXN0bmF2aWdhdGlvbg=="> github 链接</span>。</p></div><h1 id="recast-navigation源码阅读"><a class="anchor" href="#recast-navigation源码阅读">#</a> Recast Navigation 源码阅读</h1><h2 id="基础属性"><a class="anchor" href="#基础属性">#</a> 基础属性</h2><h3 id="cellsize"><a class="anchor" href="#cellsize">#</a> CellSize</h3><p>单个「Span」的长宽</p><h3 id="cellheight"><a class="anchor" href="#cellheight">#</a> CellHeight</h3><p>单个「Span」的最小高度</p><h3 id="agentheight"><a class="anchor" href="#agentheight">#</a> AgentHeight</h3><p>行走对象的高度</p><h3 id="agentradius"><a class="anchor" href="#agentradius">#</a> AgentRadius</h3><p>行走对象的步长半径</p><h3 id="agentmaxclimb"><a class="anchor" href="#agentmaxclimb">#</a> AgentMaxClimb</h3><p>行走对象的最大爬坡高度</p><h3 id="maxedgeerror"><a class="anchor" href="#maxedgeerror">#</a> MaxEdgeError</h3><p>面片和几何物体的距离，可以理解为面片和几何的贴合程度，越小贴合越紧密，面片越多</p><h3 id="vertsperpoly"><a class="anchor" href="#vertsperpoly">#</a> VertsPerPoly</h3><p>多边形的最大顶点数</p><h2 id="recast-基础数据结构"><a class="anchor" href="#recast-基础数据结构">#</a> Recast 基础数据结构</h2><h3 id="span"><a class="anchor" href="#span">#</a> Span</h3><p>体素化的最小单位，用于表示固定长宽（<a href="#cellsize">CellSize</a>），可变高的矩形区域。</p><ul><li>smin：矩形区域的最低点的 y 坐标</li><li>smax：矩形区域的最高点的 y 坐标</li><li>area：可行走状态，标识该「<a href="#span">Span</a>」上表面能否行走（0：不能，64：可以）</li><li>next：指向同 x-z 坐标的下一个「<a href="#span">Span</a>」</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Represents a span in a heightfield.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// @see rcHeightfield</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcSpan</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> smin <span class="token operator">:</span> RC_SPAN_HEIGHT_BITS<span class="token punctuation">;</span> <span class="token comment">///&lt; The lower limit of the span. [Limit: &lt; #smax]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> smax <span class="token operator">:</span> RC_SPAN_HEIGHT_BITS<span class="token punctuation">;</span> <span class="token comment">///&lt; The upper limit of the span. [Limit: &lt;= #RC_SPAN_MAX_HEIGHT]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> area <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">;</span>                   <span class="token comment">///&lt; The area id assigned to the span.</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	rcSpan<span class="token operator">*</span> next<span class="token punctuation">;</span>                            <span class="token comment">///&lt; The next span higher up in column.</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="spanpool"><a class="anchor" href="#spanpool">#</a> SpanPool</h3><p>对于「<a href="#span">Span</a>」的内存池。</p><ul><li>RC_SPANS_PER_POOL：默认 2048 个</li><li>next：指向下一个「<a href="#spanpool">SpanPool</a>」</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// A memory pool used for quick allocation of spans within a heightfield.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// @see rcHeightfield</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcSpanPool</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	rcSpanPool<span class="token operator">*</span> next<span class="token punctuation">;</span>					<span class="token comment">///&lt; The next span pool.</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	rcSpan items<span class="token punctuation">[</span>RC_SPANS_PER_POOL<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">///&lt; Array of spans in the pool.</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="heightfield"><a class="anchor" href="#heightfield">#</a> Heightfield</h3><p>用来表示模型的高度场，管理场景中的三角形面片所产生的「<a href="#span">Span</a>」。</p><ul><li>width：max_x / <a href="#cellsize">CellSize</a></li><li>height：max_y / <a href="#cellheight">CellHeight</a></li><li>bmin：(min_x, min_y, min_z)，用于表示场景包围盒的左下边界</li><li>bmax：(max_x, max_y,max_z)，用于表示场景包围盒的右上边界</li><li>cs：<a href="#cellsize">CellSize</a></li><li>ch：<a href="#cellheight">CellHeight</a></li><li>spans：「<a href="#span">Span</a>」的指针数组，记录 x-z 平面上（width * height 个）「<a href="#span">Span</a>」的首对象</li><li>pools：「<a href="#spanpool">SpanPool</a>」链表的链头，用于申请内存创建「<a href="#span">Span</a>」</li><li>freelist：管理「<a href="#spanpool">SpanPool</a>」创建出并且空闲未被使用的「<a href="#span">Span</a>」</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// A dynamic heightfield representing obstructed space.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// @ingroup recast</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcHeightfield</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token function">rcHeightfield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token operator">~</span><span class="token function">rcHeightfield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">int</span> width<span class="token punctuation">;</span>			<span class="token comment">///&lt; The width of the heightfield. (Along the x-axis in cell units.)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">int</span> height<span class="token punctuation">;</span>			<span class="token comment">///&lt; The height of the heightfield. (Along the z-axis in cell units.)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">float</span> bmin<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  	<span class="token comment">///&lt; The minimum bounds in world space. [(x, y, z)]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">float</span> bmax<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>		<span class="token comment">///&lt; The maximum bounds in world space. [(x, y, z)]</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">float</span> cs<span class="token punctuation">;</span>			<span class="token comment">///&lt; The size of each cell. (On the xz-plane.)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">float</span> ch<span class="token punctuation">;</span>			<span class="token comment">///&lt; The height of each cell. (The minimum increment along the y-axis.)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	rcSpan<span class="token operator">*</span><span class="token operator">*</span> spans<span class="token punctuation">;</span>		<span class="token comment">///&lt; Heightfield of spans (width*height).</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	rcSpanPool<span class="token operator">*</span> pools<span class="token punctuation">;</span>	<span class="token comment">///&lt; Linked list of span pools.</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	rcSpan<span class="token operator">*</span> freelist<span class="token punctuation">;</span>	<span class="token comment">///&lt; The next free span.</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token comment">// Explicitly-disabled copy constructor and copy assignment operator.</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token function">rcHeightfield</span><span class="token punctuation">(</span><span class="token keyword">const</span> rcHeightfield<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	rcHeightfield<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> rcHeightfield<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="compactspan"><a class="anchor" href="#compactspan">#</a> CompactSpan</h3><p>记录可行走「<a href="#span">Span</a>」的上表面高度等信息。</p><ul><li>y：可行走「<a href="#span">Span</a>」的 <code>smax</code> 值 <code>y = rcClamp(span.smax, 0, 0xffff);</code></li><li>reg：记录「<a href="#compactspan">CompactSpan</a>」所属区域编号</li><li>con：周围（前后左右）四个方向上「<a href="#compactspan">CompactSpan</a>」连通数据，每 <code>6</code> bit 标识一个方向<ul><li>每个方向记录的是相邻位置的第几个「<a href="#compactspan">CompactSpan</a>」和自己连通，因此可以用相邻位置的 <code>idx + con[dir]</code> 来获取到相邻「<a href="#compactspan">CompactSpan</a>」</li></ul></li><li>h：y 坐标和下一个「<a href="#span">Span</a>」的 <code>smmin</code> 的差 <code>h = rcClamp(y - span-&gt;next-&gt;smin, 0, 0xffff);</code></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Represents a span of unobstructed space within a compact heightfield.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcCompactSpan</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> y<span class="token punctuation">;</span>			<span class="token comment">///&lt; The lower extent of the span. (Measured from the heightfield's base.)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> reg<span class="token punctuation">;</span>			<span class="token comment">///&lt; The id of the region the span belongs to. (Or zero if not in a region.)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> con <span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">;</span>		<span class="token comment">///&lt; Packed neighbor connection data.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> h <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">;</span>			<span class="token comment">///&lt; The height of the span.  (Measured from #y.)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="compactcell"><a class="anchor" href="#compactcell">#</a> CompactCell</h3><p>通过第一个编号和个数，可以快速遍历所有「<a href="#compactspan">CompactSpan</a>」。</p><ul><li>index：该「<a href="#compactcell">CompactCell</a>」列从下往上第一个「<a href="#compactspan">CompactSpan</a>」的 <code>idx</code><ul><li>「<a href="#compactspan">CompactSpan</a>」编号在 y 轴方向是递增的</li></ul></li><li>count：每个「<a href="#compactcell">CompactCell</a>」包含的「<a href="#compactspan">CompactSpan</a>」个数</li></ul><blockquote><p>因此可用首个「<a href="#compactspan">CompactSpan</a>」 <code>idx</code> + 该列的「<a href="#compactspan">CompactSpan</a>」个数 <code>count</code> 来遍历整列的「<a href="#compactspan">CompactSpan</a>」</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Provides information on the content of a cell column in a compact heightfield. </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcCompactCell</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> index <span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">;</span>	<span class="token comment">///&lt; Index to the first span in the column.</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> count <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">;</span>		<span class="token comment">///&lt; Number of spans in the column.</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="compactheightfield"><a class="anchor" href="#compactheightfield">#</a> CompactHeightfield</h3><p>用来表示不存在遮挡的空间。</p><ul><li>width：max_x / <a href="#cellsize">CellSize</a></li><li>height：max_y / <a href="#cellheight">CellHeight</a></li><li>spanCount：「<a href="#compactspan">CompactSpan</a>」数量。</li><li>walkableHeight：<a href="#agentheight">AgentHeight</a>，上下两个「<a href="#compactspan">CompactSpan</a>」太近的情况下会影响能否站立</li><li>walkableClimb：<a href="#agentmaxclimb">AgentMaxClimb</a>，「<a href="#compactspan">CompactSpan</a>」内三角形片面倾斜程度会影响能否站立</li><li>borderSize：边界大小。「<a href="#region">Region</a>」的外轮廓大小。</li><li>maxDistance：构建「高度场」的「距离场」时，缓存的最大距离，用于分水岭算法的起始漫灌高度</li><li>maxRegions：临时记录「<a href="#region">Region</a>」的数量，用于「<a href="#region">Region</a>」合并和再编排</li><li>bmin：(min_x, min_y, min_z)，用于表示场景包围盒的左下边界</li><li>bmax：(max_x, max_y,max_z)，用于表示场景包围盒的右上边界</li><li>cs：<a href="#cellsize">CellSize</a></li><li>ch：<a href="#cellheight">CellHeight</a></li><li>cells：「<a href="compactcell">CompactCell</a>」数组</li><li>spans：「<a href="#compactspan">CompactSpan</a>」数组</li><li>dist：临时记录每个「<a href="#compactspan">CompactSpan</a>」的「场距」，用于划分「<a href="#region">Region</a>」</li><li>areas：记录每个「<a href="#compactspan">CompactSpan</a>」的可行走状态</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// A compact, static heightfield representing unobstructed space.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// @ingroup recast</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcCompactHeightfield</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token function">rcCompactHeightfield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token operator">~</span><span class="token function">rcCompactHeightfield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">int</span> width<span class="token punctuation">;</span>					<span class="token comment">///&lt; The width of the heightfield. (Along the x-axis in cell units.)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">int</span> height<span class="token punctuation">;</span>					<span class="token comment">///&lt; The height of the heightfield. (Along the z-axis in cell units.)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">int</span> spanCount<span class="token punctuation">;</span>				<span class="token comment">///&lt; The number of spans in the heightfield.</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">int</span> walkableHeight<span class="token punctuation">;</span>			<span class="token comment">///&lt; The walkable height used during the build of the field.  (See: rcConfig::walkableHeight)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">int</span> walkableClimb<span class="token punctuation">;</span>			<span class="token comment">///&lt; The walkable climb used during the build of the field. (See: rcConfig::walkableClimb)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">int</span> borderSize<span class="token punctuation">;</span>				<span class="token comment">///&lt; The AABB border size used during the build of the field. (See: rcConfig::borderSize)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> maxDistance<span class="token punctuation">;</span>	<span class="token comment">///&lt; The maximum distance value of any span within the field. </span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> maxRegions<span class="token punctuation">;</span>	<span class="token comment">///&lt; The maximum region id of any span within the field. </span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">float</span> bmin<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>				<span class="token comment">///&lt; The minimum bounds in world space. [(x, y, z)]</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">float</span> bmax<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>				<span class="token comment">///&lt; The maximum bounds in world space. [(x, y, z)]</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token keyword">float</span> cs<span class="token punctuation">;</span>					<span class="token comment">///&lt; The size of each cell. (On the xz-plane.)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">float</span> ch<span class="token punctuation">;</span>					<span class="token comment">///&lt; The height of each cell. (The minimum increment along the y-axis.)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	rcCompactCell<span class="token operator">*</span> cells<span class="token punctuation">;</span>		<span class="token comment">///&lt; Array of cells. [Size: #width*#height]</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	rcCompactSpan<span class="token operator">*</span> spans<span class="token punctuation">;</span>		<span class="token comment">///&lt; Array of spans. [Size: #spanCount]</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> dist<span class="token punctuation">;</span>		<span class="token comment">///&lt; Array containing border distance data. [Size: #spanCount]</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span> areas<span class="token punctuation">;</span>		<span class="token comment">///&lt; Array containing area id data. [Size: #spanCount]</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="regions-相关数据结构"><a class="anchor" href="#regions-相关数据结构">#</a> Regions 相关数据结构</h2><h3 id="region"><a class="anchor" href="#region">#</a> Region</h3><p>多个「<a href="#compactspan">CompactSpan</a>」组成的区域。</p><ul><li>spanCount：「<a href="#compactspan">CompactSpan</a>」数量</li><li>id： <code>region_id</code></li><li>areaType：记录「<a href="#region">Region</a>」的可行走状态，继承于 <code>CompactHeightfield.areas</code></li><li>remap：是否重新编排</li><li>visited：是否已经访问过</li><li>overlap：是否有重叠</li><li>ymin：「<a href="#region">Region</a>」内所有「<a href="#compactspan">CompactSpan</a>」的最小 <code>y</code></li><li>ymax：「<a href="#region">Region</a>」内所有「<a href="#compactspan">CompactSpan</a>」的最大 <code>y</code></li><li>connectsToBorder：是否和轮廓（BorderSize）相邻</li><li>connections：记录该「<a href="#region">Region</a>」能连通的其他「<a href="#region">Region</a>」的 <code>region_id</code></li><li>floors：记录和该「<a href="#region">Region</a>」的重叠的「<a href="#region">Region</a>」的 <code>region_id</code></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcRegion</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">inline</span> <span class="token function">rcRegion</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">short</span> i<span class="token punctuation">)</span> <span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token function">spanCount</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token function">id</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token function">areaType</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token function">remap</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token function">visited</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token function">overlap</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token function">connectsToBorder</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token function">ymin</span><span class="token punctuation">(</span><span class="token number">0xffff</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token function">ymax</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">int</span> spanCount<span class="token punctuation">;</span>					<span class="token comment">// Number of spans belonging to this region</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> id<span class="token punctuation">;</span>				<span class="token comment">// ID of the region</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> areaType<span class="token punctuation">;</span>			<span class="token comment">// Are type.</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token keyword">bool</span> remap<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">bool</span> visited<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token keyword">bool</span> overlap<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token keyword">bool</span> connectsToBorder<span class="token punctuation">;</span>			<span class="token comment">// neighbor is border</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> ymin<span class="token punctuation">,</span> ymax<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	rcIntArray connections<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	rcIntArray floors<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="contour"><a class="anchor" href="#contour">#</a> Contour</h3><p>用于记录单个「<a href="#region">Region</a>」轮廓顶点数据。</p><ul><li>nverts：「simplify」后的「<a href="#region">Region</a>」轮廓顶点数量</li><li>verts：「simplify」后的「<a href="#region">Region</a>」轮廓顶点数据 <code>[x, y, z, neighbor_region_id] * nverts</code></li><li>nrverts：「simplify」前的「<a href="#region">Region</a>」轮廓顶点数量</li><li>rverts：「simplify」前的「<a href="#region">Region</a>」轮廓顶点数据 <code>[x, y, z, neighbor_region_id] * nverts</code></li><li>reg：轮廓顶点所表示的「<a href="#region">Region</a>」的 <code>region_id</code></li><li>area：轮廓顶点所表示的「<a href="#region">Region</a>」的 <code>area_type</code> 地形类型</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcContour</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span> verts<span class="token punctuation">;</span>			<span class="token comment">///&lt; Simplified contour vertex and connection data. [Size: 4 * #nverts]</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">int</span> nverts<span class="token punctuation">;</span>			<span class="token comment">///&lt; The number of vertices in the simplified contour. </span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span> rverts<span class="token punctuation">;</span>		<span class="token comment">///&lt; Raw contour vertex and connection data. [Size: 4 * #nrverts]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span> nrverts<span class="token punctuation">;</span>		<span class="token comment">///&lt; The number of vertices in the raw contour. </span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> reg<span class="token punctuation">;</span>	<span class="token comment">///&lt; The region id of the contour.</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> area<span class="token punctuation">;</span>	<span class="token comment">///&lt; The area id of the contour.</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="contourset"><a class="anchor" href="#contourset">#</a> ContourSet</h3><p>「<a href="#contour">Contour</a>」集合管理器，存储所有「<a href="#region">Region</a>」的轮廓顶点数据。</p><ul><li>conts：「<a href="#contour">Contour</a>」数组，记录所有「<a href="#region">Region</a>」的轮廓顶点数据</li><li>nconts： <code>len(conts)</code></li><li>bmin：(min_x, min_y, min_z)，用于表示场景包围盒的左下边界</li><li>bmax：(max_x, max_y,max_z)，用于表示场景包围盒的右上边界</li><li>cs：<a href="#cellsize">CellSize</a></li><li>ch：<a href="#cellheight">CellHeight</a></li><li>width：max_x / <a href="#cellsize">CellSize</a></li><li>height：max_y / <a href="#cellheight">CellHeight</a></li><li>borderSize：边界大小，「<a href="#region">Region</a>」的外轮廓</li><li>maxError：<a href="#maxedgeerror">MaxEdgeError</a></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcContourSet</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">rcContourSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token operator">~</span><span class="token function">rcContourSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	rcContour<span class="token operator">*</span> conts<span class="token punctuation">;</span>	<span class="token comment">///&lt; An array of the contours in the set. [Size: #nconts]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span> nconts<span class="token punctuation">;</span>			<span class="token comment">///&lt; The number of contours in the set.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">float</span> bmin<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  	<span class="token comment">///&lt; The minimum bounds in world space. [(x, y, z)]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">float</span> bmax<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>		<span class="token comment">///&lt; The maximum bounds in world space. [(x, y, z)]</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">float</span> cs<span class="token punctuation">;</span>			<span class="token comment">///&lt; The size of each cell. (On the xz-plane.)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">float</span> ch<span class="token punctuation">;</span>			<span class="token comment">///&lt; The height of each cell. (The minimum increment along the y-axis.)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">int</span> width<span class="token punctuation">;</span>			<span class="token comment">///&lt; The width of the set. (Along the x-axis in cell units.) </span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">int</span> height<span class="token punctuation">;</span>			<span class="token comment">///&lt; The height of the set. (Along the z-axis in cell units.) </span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">int</span> borderSize<span class="token punctuation">;</span>		<span class="token comment">///&lt; The AABB border size used to generate the source data from which the contours were derived.</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">float</span> maxError<span class="token punctuation">;</span>		<span class="token comment">///&lt; The MaxEdgeError that this contour set was simplified with.</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="contourhole"><a class="anchor" href="#contourhole">#</a> ContourHole</h3><ul><li>contour：记录对应 <code>region_id</code> 的「<a href="#contour">Contour</a>」 数据，只记录凹多边形</li><li>minx, minz, leftmost：凹多边形的左下角顶点坐标和顶点编号</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcContourHole</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	rcContour<span class="token operator">*</span> contour<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">int</span> minx<span class="token punctuation">,</span> minz<span class="token punctuation">,</span> leftmost<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="contourregion"><a class="anchor" href="#contourregion">#</a> ContourRegion</h3><p>「<a href="#region">Region</a>」的「<a href="#contour">Contour</a>」 数据。</p><ul><li>outline：记录对应 <code>region_id</code> 的「<a href="#contour">Contour</a>」 数据，只记录凸多边形</li><li>nholes：记录对应 <code>region_id</code> 的凹多边形轮廓数量，理论上应该只有一个</li><li>holes：凹多边形数值的起始索引，配合 <code>nholes</code> 可以获取所有的凹多边形</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcContourRegion</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	rcContour<span class="token operator">*</span> outline<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	rcContourHole<span class="token operator">*</span> holes<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span> nholes<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="potentialdiagonal"><a class="anchor" href="#potentialdiagonal">#</a> PotentialDiagonal</h3><ul><li>vert：顶点在「<a href="#contour">Contour</a>」的下标</li><li>dist：该凸多边形顶点和某个凹多边形顶点的距离平方</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcPotentialDiagonal</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">int</span> vert<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">int</span> dist<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="mesh-相关数据结构"><a class="anchor" href="#mesh-相关数据结构">#</a> Mesh 相关数据结构</h2><h3 id="edge"><a class="anchor" href="#edge">#</a> Edge</h3><p>多边形边信息，一条边最多被两个多边形共用</p><p><img data-src="https://blog-1255596461.cos.ap-guangzhou.myqcloud.com/blog_pic/20211104170604.png" alt="image-20211104170603387"></p><ul><li>vert：首尾顶点编号</li><li>poly：该条边所属的多边形编号，由于可能有两个多边形共用，所以 0 记录升序的多边形，1 记录降序的多边形</li><li>polyEdge：多边形内的边编号，由于可能有两个多边形共用，所以 0 记录升序边编号，1 记录降序边编号</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcEdge</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> vert<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> polyEdge<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> poly<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="polymesh"><a class="anchor" href="#polymesh">#</a> PolyMesh</h3><p>记录所有「Poly」数据</p><ul><li>verts：全部「<a href="#region">Region</a>」轮廓的所有顶点集合</li><li>polys：2 倍的 <code>npolys</code> 大小， <code>|_0_|_1_| * npolys</code><ul><li>前半部分记录每个多边形各个顶点的顶点编号 <code>|_0_|</code></li><li>后半部分记录每条边相邻的多边形编号 <code>|_1_|</code></li></ul></li><li>regs：记录每个「Poly」的 <code>region_id</code></li><li>flags：标记地形类型，值取决于 <code>areas</code></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">enum</span> <span class="token class-name">SamplePolyFlags</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	SAMPLE_POLYFLAGS_WALK		<span class="token operator">=</span> <span class="token number">0x01</span><span class="token punctuation">,</span>		<span class="token comment">// Ability to walk (ground, grass, road)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	SAMPLE_POLYFLAGS_SWIM		<span class="token operator">=</span> <span class="token number">0x02</span><span class="token punctuation">,</span>		<span class="token comment">// Ability to swim (water).</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	SAMPLE_POLYFLAGS_DOOR		<span class="token operator">=</span> <span class="token number">0x04</span><span class="token punctuation">,</span>		<span class="token comment">// Ability to move through doors.</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	SAMPLE_POLYFLAGS_JUMP		<span class="token operator">=</span> <span class="token number">0x08</span><span class="token punctuation">,</span>		<span class="token comment">// Ability to jump.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	SAMPLE_POLYFLAGS_DISABLED	<span class="token operator">=</span> <span class="token number">0x10</span><span class="token punctuation">,</span>		<span class="token comment">// Disabled polygon</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	SAMPLE_POLYFLAGS_ALL		<span class="token operator">=</span> <span class="token number">0xffff</span>	<span class="token comment">// All abilities.</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>areas：记录每个「Poly」的 <code>area_type</code> 地形类型</li><li>nverts：去重之后的「<a href="#contour">Contour</a>」顶点数量</li><li>npolys：合并后的多边形数量</li><li>maxpolys：最大「Poly」数量</li><li>nvp：<a href="#vertsperpoly">VertsPerPoly</a></li><li>bmin：(min_x, min_y, min_z)，用于表示场景包围盒的左下边界</li><li>bmax：(max_x, max_y,max_z)，用于表示场景包围盒的右上边界</li><li>cs：<a href="#cellsize">CellSize</a></li><li>ch：<a href="#cellheight">CellHeight</a></li><li>borderSize：边界大小，「<a href="#region">Region</a>」的外轮廓</li><li>maxError：<a href="#maxedgeerror">MaxEdgeError</a></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcPolyMesh</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">rcPolyMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token operator">~</span><span class="token function">rcPolyMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> verts<span class="token punctuation">;</span>	<span class="token comment">///&lt; The mesh vertices. [Form: (x, y, z) * #nverts]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> polys<span class="token punctuation">;</span>	<span class="token comment">///&lt; Polygon and neighbor data. [Length: #maxpolys * 2 * #nvp]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> regs<span class="token punctuation">;</span>	<span class="token comment">///&lt; The region id assigned to each polygon. [Length: #maxpolys]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> flags<span class="token punctuation">;</span>	<span class="token comment">///&lt; The user defined flags for each polygon. [Length: #maxpolys]</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span> areas<span class="token punctuation">;</span>	<span class="token comment">///&lt; The area id assigned to each polygon. [Length: #maxpolys]</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">int</span> nverts<span class="token punctuation">;</span>				<span class="token comment">///&lt; The number of vertices.</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">int</span> npolys<span class="token punctuation">;</span>				<span class="token comment">///&lt; The number of polygons.</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">int</span> maxpolys<span class="token punctuation">;</span>			<span class="token comment">///&lt; The number of allocated polygons.</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">int</span> nvp<span class="token punctuation">;</span>				<span class="token comment">///&lt; The maximum number of vertices per polygon.</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">float</span> bmin<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>			<span class="token comment">///&lt; The minimum bounds in world space. [(x, y, z)]</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">float</span> bmax<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>			<span class="token comment">///&lt; The maximum bounds in world space. [(x, y, z)]</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">float</span> cs<span class="token punctuation">;</span>				<span class="token comment">///&lt; The size of each cell. (On the xz-plane.)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token keyword">float</span> ch<span class="token punctuation">;</span>				<span class="token comment">///&lt; The height of each cell. (The minimum increment along the y-axis.)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">int</span> borderSize<span class="token punctuation">;</span>			<span class="token comment">///&lt; The AABB border size used to generate the source data from which the mesh was derived.</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token keyword">float</span> maxEdgeError<span class="token punctuation">;</span>		<span class="token comment">///&lt; The max error of the polygon edges in the mesh.</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="polymeshdetail"><a class="anchor" href="#polymeshdetail">#</a> PolyMeshDetail</h3><p>以每个「Poly」为单位，记录「Poly」经过采样和切分后得到的三角形信息</p><ul><li><p>meshes：四个元素的数组，每四个元素表示一个「Poly」的数据信息，四个元素代表含义如下</p><ul><li>多边形首个顶点的顶点编号</li><li>总顶点数量，包括内部新增的</li><li>多边形首个三角形的编号</li><li>总三角形数量</li></ul></li><li><p>verts：记录所有「Poly」经过采样和切分后的顶点</p></li><li><p>tris：记录所有「Poly」经过采样和切分后的三角形</p></li><li><p>nmeshes：「Poly」数量，同 <code>PolyMesh.npolys</code></p></li><li><p>nverts：「Poly」的总顶点数量 <code>len(verts)</code></p></li><li><p>ntris：「Poly」的总三角形数量 <code>len(tris)</code></p></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Contains triangle meshes that represent detailed height data associated </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// with the polygons in its associated polygon mesh object.</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/// @ingroup recast</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcPolyMeshDetail</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">*</span> meshes<span class="token punctuation">;</span>	<span class="token comment">///&lt; The sub-mesh data. [Size: 4*#nmeshes] </span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">float</span><span class="token operator">*</span> verts<span class="token punctuation">;</span>			<span class="token comment">///&lt; The mesh vertices. [Size: 3*#nverts] </span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span> tris<span class="token punctuation">;</span>	<span class="token comment">///&lt; The mesh triangles. [Size: 4*#ntris] </span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">int</span> nmeshes<span class="token punctuation">;</span>			<span class="token comment">///&lt; The number of sub-meshes defined by #meshes.</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">int</span> nverts<span class="token punctuation">;</span>				<span class="token comment">///&lt; The number of vertices in #verts.</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">int</span> ntris<span class="token punctuation">;</span>				<span class="token comment">///&lt; The number of triangles in #tris.</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="heightpatch"><a class="anchor" href="#heightpatch">#</a> HeightPatch</h3><p>记录单个「Poly」的高度相关数据</p><ul><li>data：记录「Poly」AABB 包围盒内每个同 <code>region_id</code> 点所代表的「<a href="#compactspan">CompactSpan</a>」的上表面高度</li><li>xmin：「Poly」所有顶点的最小 <code>x</code> 坐标</li><li>ymin：「Poly」所有顶点的最小 <code>z</code> 坐标</li><li>with：「Poly」最大最小顶点的 <code>x</code> 轴跨度 (包围盒长)</li><li>height：「Poly」最大最小顶点的 <code>z</code> 轴跨度 (包围盒宽)</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">rcHeightPatch</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">inline</span> <span class="token function">rcHeightPatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">data</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">xmin</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ymin</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">width</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">height</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">inline</span> <span class="token operator">~</span><span class="token function">rcHeightPatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">rcFree</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> data<span class="token punctuation">;</span> <span class="token comment">// all poly xz-plane AABB maxhw,maxhh</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span> xmin<span class="token punctuation">,</span> ymin<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="navmesh-相关数据结构"><a class="anchor" href="#navmesh-相关数据结构">#</a> NavMesh 相关数据结构</h2><h3 id="meshtile"><a class="anchor" href="#meshtile">#</a> MeshTile</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Defines a navigation mesh tile.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// @ingroup detour</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">dtMeshTile</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> salt<span class="token punctuation">;</span>					<span class="token comment">///&lt; Counter describing modifications to the tile.</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> linksFreeList<span class="token punctuation">;</span>			<span class="token comment">///&lt; Index to the next free link.</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	dtMeshHeader<span class="token operator">*</span> header<span class="token punctuation">;</span>				<span class="token comment">///&lt; The tile header.</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	dtPoly<span class="token operator">*</span> polys<span class="token punctuation">;</span>						<span class="token comment">///&lt; The tile polygons. [Size: dtMeshHeader::polyCount]</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">float</span><span class="token operator">*</span> verts<span class="token punctuation">;</span>						<span class="token comment">///&lt; The tile vertices. [Size: dtMeshHeader::vertCount]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	dtLink<span class="token operator">*</span> links<span class="token punctuation">;</span>						<span class="token comment">///&lt; The tile links. [Size: dtMeshHeader::maxLinkCount]</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	dtPolyDetail<span class="token operator">*</span> detailMeshes<span class="token punctuation">;</span>			<span class="token comment">///&lt; The tile's detail sub-meshes. [Size: dtMeshHeader::detailMeshCount]</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	</pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token comment">/// The detail mesh's unique vertices. [(x, y, z) * dtMeshHeader::detailVertCount]</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">float</span><span class="token operator">*</span> detailVerts<span class="token punctuation">;</span>	</pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token comment">/// The detail mesh's triangles. [(vertA, vertB, vertC, triFlags) * dtMeshHeader::detailTriCount].</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token comment">/// See dtDetailTriEdgeFlags and dtGetDetailTriEdgeFlags.</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span> detailTris<span class="token punctuation">;</span>	</pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token comment">/// The tile bounding volume nodes. [Size: dtMeshHeader::bvNodeCount]</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token comment">/// (Will be null if bounding volumes are disabled.)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	dtBVNode<span class="token operator">*</span> bvTree<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>	dtOffMeshConnection<span class="token operator">*</span> offMeshCons<span class="token punctuation">;</span>		<span class="token comment">///&lt; The tile off-mesh connections. [Size: dtMeshHeader::offMeshConCount]</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		</pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span> data<span class="token punctuation">;</span>					<span class="token comment">///&lt; The tile data. (Not directly accessed under normal situations.)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token keyword">int</span> dataSize<span class="token punctuation">;</span>							<span class="token comment">///&lt; Size of the tile data.</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token keyword">int</span> flags<span class="token punctuation">;</span>								<span class="token comment">///&lt; Tile flags. (See: #dtTileFlags)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>	dtMeshTile<span class="token operator">*</span> next<span class="token punctuation">;</span>						<span class="token comment">///&lt; The next free tile, or the next tile in the spatial grid.</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="navmesh"><a class="anchor" href="#navmesh">#</a> NavMesh</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">dtNavMesh</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">//...</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	dtNavMeshParams m_params<span class="token punctuation">;</span>			<span class="token comment">///&lt; Current initialization params. TODO: do not store this info twice.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">float</span> m_orig<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>					<span class="token comment">///&lt; Origin of the tile (0,0)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">float</span> m_tileWidth<span class="token punctuation">,</span> m_tileHeight<span class="token punctuation">;</span>	<span class="token comment">///&lt; Dimensions of each tile.</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">int</span> m_maxTiles<span class="token punctuation">;</span>						<span class="token comment">///&lt; Max number of tiles.</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">int</span> m_tileLutSize<span class="token punctuation">;</span>					<span class="token comment">///&lt; Tile hash lookup size (must be pot).</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">int</span> m_tileLutMask<span class="token punctuation">;</span>					<span class="token comment">///&lt; Tile hash lookup mask.</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>	dtMeshTile<span class="token operator">*</span><span class="token operator">*</span> m_posLookup<span class="token punctuation">;</span>			<span class="token comment">///&lt; Tile hash lookup.</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	dtMeshTile<span class="token operator">*</span> m_nextFree<span class="token punctuation">;</span>				<span class="token comment">///&lt; Freelist of tiles.</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	dtMeshTile<span class="token operator">*</span> m_tiles<span class="token punctuation">;</span>				<span class="token comment">///&lt; List of tiles.</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="navmeshparams"><a class="anchor" href="#navmeshparams">#</a> NavMeshParams</h3><ul><li>orig[3]： <code>bmin</code></li><li>tileWidth： <code>max_x - min_x</code></li><li>tileHeight： <code>max_z - min_z</code></li><li>maxPolys：「<a href="#polymesh">PolyMesh</a>」的 <code>npolys</code></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Configuration parameters used to define multi-tile navigation meshes.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// The values are used to allocate space during the initialization of a navigation mesh.</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/// @see dtNavMesh::init()</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">/// @ingroup detour</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">dtNavMeshParams</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">float</span> orig<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>					<span class="token comment">///&lt; The world space origin of the navigation mesh's tile space. [(x, y, z)]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">float</span> tileWidth<span class="token punctuation">;</span>				<span class="token comment">///&lt; The width of each tile. (Along the x-axis.)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">float</span> tileHeight<span class="token punctuation">;</span>				<span class="token comment">///&lt; The height of each tile. (Along the z-axis.)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">int</span> maxTiles<span class="token punctuation">;</span>					<span class="token comment">///&lt; The maximum number of tiles the navigation mesh can contain. This and maxPolys are used to calculate how many bits are needed to identify tiles and polygons uniquely.</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">int</span> maxPolys<span class="token punctuation">;</span>					<span class="token comment">///&lt; The maximum number of polygons each tile can contain. This and maxTiles are used to calculate how many bits are needed to identify tiles and polygons uniquely.</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="navmeshcreateparams"><a class="anchor" href="#navmeshcreateparams">#</a> NavMeshCreateParams</h3><h4 id="polymesh-相关数据"><a class="anchor" href="#polymesh-相关数据">#</a> PolyMesh 相关数据</h4><ul><li>verts：「<a href="#polymesh">PolyMesh</a>」的 <code>verts</code></li><li>vertCount：「<a href="#polymesh">PolyMesh</a>」的 <code>nverts</code></li><li>polys：「<a href="#polymesh">PolyMesh</a>」的 <code>polys</code></li><li>polyAreas：「<a href="#polymesh">PolyMesh</a>」的 <code>areas</code></li><li>polyFlags：「<a href="#polymesh">PolyMesh</a>」的 <code>flags</code></li><li>polyCount：「<a href="#polymesh">PolyMesh</a>」的 <code>npolys</code></li><li>nvp：「<a href="#polymesh">PolyMesh</a>」的 <code>nvp</code></li></ul><h4 id="polymeshdetail-相关数据"><a class="anchor" href="#polymeshdetail-相关数据">#</a> PolyMeshDetail 相关数据</h4><ul><li>detailMeshes：「<a href="#polymeshdetail">PolyMeshDetail</a>」的 <code>meshes</code></li><li>detailVerts：「<a href="#polymeshdetail">PolyMeshDetail</a>」的 <code>verts</code></li><li>detailVertsCount：「<a href="#polymeshdetail">PolyMeshDetail</a>」的 <code>nverts</code></li><li>detailTris：「<a href="#polymeshdetail">PolyMeshDetail</a>」的 <code>tris</code></li><li>detailTriCount：「<a href="#polymeshdetail">PolyMeshDetail</a>」的 <code>ntris</code></li></ul><h4 id="offmeshconnection-相关数据"><a class="anchor" href="#offmeshconnection-相关数据">#</a> OffMeshConnection 相关数据</h4><p>自定义的一些导航链接数据</p><ul><li>offMeshConVerts：</li><li>offMeshConRad：</li><li>offMeshConDir：</li><li>offMeshConAreas：</li><li>offMeshConFlags：</li><li>offMeshConUserID：</li><li>offMeshConCount：</li></ul><h4 id="tile-相关数据"><a class="anchor" href="#tile-相关数据">#</a> Tile 相关数据</h4><ul><li>userId：</li><li>tileX：</li><li>tileY：</li><li>tileLayer：</li></ul><h4 id="general-configuration-相关数据"><a class="anchor" href="#general-configuration-相关数据">#</a> General Configuration 相关数据</h4><ul><li>walkableHeight：<a href="#agentheight">AgentHeight</a></li><li>walkableRadius：<a href="#agentradius">AgentRadius</a></li><li>walkableClimb：<a href="#agentmaxclimb">AgentMaxClimb</a></li><li>bmin：(min_x, min_y, min_z)，用于表示场景包围盒的左下边界</li><li>bmax：(max_x, max_y,max_z)，用于表示场景包围盒的右上边界</li><li>cs：<a href="#cellsize">CellSize</a></li><li>ch：<a href="#cellheight">CellHeight</a></li><li>buildBvTree：标记是否需要构建 BVTree</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">dtNavMeshCreateParams</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token comment">/// @name Polygon Mesh Attributes</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token comment">/// Used to create the base navigation graph.</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token comment">/// See #rcPolyMesh for details related to these attributes.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token comment">/// @&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> verts<span class="token punctuation">;</span>			<span class="token comment">///&lt; The polygon mesh vertices. [(x, y, z) * #vertCount] [Unit: vx]</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">int</span> vertCount<span class="token punctuation">;</span>							<span class="token comment">///&lt; The number vertices in the polygon mesh. [Limit: >= 3]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> polys<span class="token punctuation">;</span>			<span class="token comment">///&lt; The polygon data. [Size: #polyCount * 2 * #nvp]</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> polyFlags<span class="token punctuation">;</span>		<span class="token comment">///&lt; The user defined flags assigned to each polygon. [Size: #polyCount]</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span> polyAreas<span class="token punctuation">;</span>			<span class="token comment">///&lt; The user defined area ids assigned to each polygon. [Size: #polyCount]</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">int</span> polyCount<span class="token punctuation">;</span>							<span class="token comment">///&lt; Number of polygons in the mesh. [Limit: >= 1]</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">int</span> nvp<span class="token punctuation">;</span>								<span class="token comment">///&lt; Number maximum number of vertices per polygon. [Limit: >= 3]</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token comment">/// @&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token comment">/// @name Height Detail Attributes (Optional)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token comment">/// See #rcPolyMeshDetail for details related to these attributes.</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token comment">/// @&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">*</span> detailMeshes<span class="token punctuation">;</span>		<span class="token comment">///&lt; The height detail sub-mesh data. [Size: 4 * #polyCount]</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">float</span><span class="token operator">*</span> detailVerts<span class="token punctuation">;</span>				<span class="token comment">///&lt; The detail mesh vertices. [Size: 3 * #detailVertsCount] [Unit: wu]</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token keyword">int</span> detailVertsCount<span class="token punctuation">;</span>					<span class="token comment">///&lt; The number of vertices in the detail mesh.</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span> detailTris<span class="token punctuation">;</span>		<span class="token comment">///&lt; The detail mesh triangles. [Size: 4 * #detailTriCount]</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token keyword">int</span> detailTriCount<span class="token punctuation">;</span>						<span class="token comment">///&lt; The number of triangles in the detail mesh.</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token comment">/// @&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token comment">/// @name Off-Mesh Connections Attributes (Optional)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>	<span class="token comment">/// Used to define a custom point-to-point edge within the navigation graph, an </span></pre></td></tr><tr><td data-num="31"></td><td><pre>	<span class="token comment">/// off-mesh connection is a user defined traversable connection made up to two vertices, </span></pre></td></tr><tr><td data-num="32"></td><td><pre>	<span class="token comment">/// at least one of which resides within a navigation mesh polygon.</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	<span class="token comment">/// @&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>	<span class="token comment">/// Off-mesh connection vertices. [(ax, ay, az, bx, by, bz) * #offMeshConCount] [Unit: wu]</span></pre></td></tr><tr><td data-num="36"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">float</span><span class="token operator">*</span> offMeshConVerts<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>	<span class="token comment">/// Off-mesh connection radii. [Size: #offMeshConCount] [Unit: wu]</span></pre></td></tr><tr><td data-num="38"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">float</span><span class="token operator">*</span> offMeshConRad<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>	<span class="token comment">/// User defined flags assigned to the off-mesh connections. [Size: #offMeshConCount]</span></pre></td></tr><tr><td data-num="40"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">*</span> offMeshConFlags<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>	<span class="token comment">/// User defined area ids assigned to the off-mesh connections. [Size: #offMeshConCount]</span></pre></td></tr><tr><td data-num="42"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span> offMeshConAreas<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>	<span class="token comment">/// The permitted travel direction of the off-mesh connections. [Size: #offMeshConCount]</span></pre></td></tr><tr><td data-num="44"></td><td><pre>	<span class="token comment">///</span></pre></td></tr><tr><td data-num="45"></td><td><pre>	<span class="token comment">/// 0 = Travel only from endpoint A to endpoint B.&lt;br/></span></pre></td></tr><tr><td data-num="46"></td><td><pre>	<span class="token comment">/// #DT_OFFMESH_CON_BIDIR = Bidirectional travel.</span></pre></td></tr><tr><td data-num="47"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span> offMeshConDir<span class="token punctuation">;</span>	</pre></td></tr><tr><td data-num="48"></td><td><pre>	<span class="token comment">/// The user defined ids of the off-mesh connection. [Size: #offMeshConCount]</span></pre></td></tr><tr><td data-num="49"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">*</span> offMeshConUserID<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>	<span class="token comment">/// The number of off-mesh connections. [Limit: >= 0]</span></pre></td></tr><tr><td data-num="51"></td><td><pre>	<span class="token keyword">int</span> offMeshConCount<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre></pre></td></tr><tr><td data-num="53"></td><td><pre>	<span class="token comment">/// @&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>	<span class="token comment">/// @name Tile Attributes</span></pre></td></tr><tr><td data-num="55"></td><td><pre>	<span class="token comment">/// @note The tile grid/layer data can be left at zero if the destination is a single tile mesh.</span></pre></td></tr><tr><td data-num="56"></td><td><pre>	<span class="token comment">/// @&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre></pre></td></tr><tr><td data-num="58"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> userId<span class="token punctuation">;</span>	<span class="token comment">///&lt; The user defined id of the tile.</span></pre></td></tr><tr><td data-num="59"></td><td><pre>	<span class="token keyword">int</span> tileX<span class="token punctuation">;</span>				<span class="token comment">///&lt; The tile's x-grid location within the multi-tile destination mesh. (Along the x-axis.)</span></pre></td></tr><tr><td data-num="60"></td><td><pre>	<span class="token keyword">int</span> tileY<span class="token punctuation">;</span>				<span class="token comment">///&lt; The tile's y-grid location within the multi-tile desitation mesh. (Along the z-axis.)</span></pre></td></tr><tr><td data-num="61"></td><td><pre>	<span class="token keyword">int</span> tileLayer<span class="token punctuation">;</span>			<span class="token comment">///&lt; The tile's layer within the layered destination mesh. [Limit: >= 0] (Along the y-axis.)</span></pre></td></tr><tr><td data-num="62"></td><td><pre>	<span class="token keyword">float</span> bmin<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>			<span class="token comment">///&lt; The minimum bounds of the tile. [(x, y, z)] [Unit: wu]</span></pre></td></tr><tr><td data-num="63"></td><td><pre>	<span class="token keyword">float</span> bmax<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>			<span class="token comment">///&lt; The maximum bounds of the tile. [(x, y, z)] [Unit: wu]</span></pre></td></tr><tr><td data-num="64"></td><td><pre></pre></td></tr><tr><td data-num="65"></td><td><pre>	<span class="token comment">/// @&#125;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>	<span class="token comment">/// @name General Configuration Attributes</span></pre></td></tr><tr><td data-num="67"></td><td><pre>	<span class="token comment">/// @&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre></pre></td></tr><tr><td data-num="69"></td><td><pre>	<span class="token keyword">float</span> walkableHeight<span class="token punctuation">;</span>	<span class="token comment">///&lt; The agent height. [Unit: wu]</span></pre></td></tr><tr><td data-num="70"></td><td><pre>	<span class="token keyword">float</span> walkableRadius<span class="token punctuation">;</span>	<span class="token comment">///&lt; The agent radius. [Unit: wu]</span></pre></td></tr><tr><td data-num="71"></td><td><pre>	<span class="token keyword">float</span> walkableClimb<span class="token punctuation">;</span>	<span class="token comment">///&lt; The agent maximum traversable ledge. (Up/Down) [Unit: wu]</span></pre></td></tr><tr><td data-num="72"></td><td><pre>	<span class="token keyword">float</span> cs<span class="token punctuation">;</span>				<span class="token comment">///&lt; The xz-plane cell size of the polygon mesh. [Limit: > 0] [Unit: wu]</span></pre></td></tr><tr><td data-num="73"></td><td><pre>	<span class="token keyword">float</span> ch<span class="token punctuation">;</span>				<span class="token comment">///&lt; The y-axis cell height of the polygon mesh. [Limit: > 0] [Unit: wu]</span></pre></td></tr><tr><td data-num="74"></td><td><pre></pre></td></tr><tr><td data-num="75"></td><td><pre>	<span class="token comment">/// True if a bounding volume tree should be built for the tile.</span></pre></td></tr><tr><td data-num="76"></td><td><pre>	<span class="token comment">/// @note The BVTree is not normally needed for layered navigation meshes.</span></pre></td></tr><tr><td data-num="77"></td><td><pre>	<span class="token keyword">bool</span> buildBvTree<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre></pre></td></tr><tr><td data-num="79"></td><td><pre>	<span class="token comment">/// @&#125;</span></pre></td></tr><tr><td data-num="80"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="meshheader"><a class="anchor" href="#meshheader">#</a> MeshHeader</h3><ul><li>bvNodeCount： <code>buildBvTree ? polyCount*2 : 0;</code></li><li>bvQuantFactor： <code>1.0f / cs;</code></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Provides high level information related to a dtMeshTile object.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// @ingroup detour</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">dtMeshHeader</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span> magic<span class="token punctuation">;</span>				<span class="token comment">///&lt; Tile magic number. (Used to identify the data format.)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span> version<span class="token punctuation">;</span>			<span class="token comment">///&lt; Tile data format version number.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">int</span> x<span class="token punctuation">;</span>					<span class="token comment">///&lt; The x-position of the tile within the dtNavMesh tile grid. (x, y, layer)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">int</span> y<span class="token punctuation">;</span>					<span class="token comment">///&lt; The y-position of the tile within the dtNavMesh tile grid. (x, y, layer)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">int</span> layer<span class="token punctuation">;</span>				<span class="token comment">///&lt; The layer of the tile within the dtNavMesh tile grid. (x, y, layer)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> userId<span class="token punctuation">;</span>	<span class="token comment">///&lt; The user defined id of the tile.</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">int</span> polyCount<span class="token punctuation">;</span>			<span class="token comment">///&lt; The number of polygons in the tile.</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">int</span> vertCount<span class="token punctuation">;</span>			<span class="token comment">///&lt; The number of vertices in the tile.</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">int</span> maxLinkCount<span class="token punctuation">;</span>		<span class="token comment">///&lt; The number of allocated links.</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">int</span> detailMeshCount<span class="token punctuation">;</span>	<span class="token comment">///&lt; The number of sub-meshes in the detail mesh.</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	</pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token comment">/// The number of unique vertices in the detail mesh. (In addition to the polygon vertices.)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token keyword">int</span> detailVertCount<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	</pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token keyword">int</span> detailTriCount<span class="token punctuation">;</span>			<span class="token comment">///&lt; The number of triangles in the detail mesh.</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token keyword">int</span> bvNodeCount<span class="token punctuation">;</span>			<span class="token comment">///&lt; The number of bounding volume nodes. (Zero if bounding volumes are disabled.)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token keyword">int</span> offMeshConCount<span class="token punctuation">;</span>		<span class="token comment">///&lt; The number of off-mesh connections.</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token keyword">int</span> offMeshBase<span class="token punctuation">;</span>			<span class="token comment">///&lt; The index of the first polygon which is an off-mesh connection.</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token keyword">float</span> walkableHeight<span class="token punctuation">;</span>		<span class="token comment">///&lt; The height of the agents using the tile.</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token keyword">float</span> walkableRadius<span class="token punctuation">;</span>		<span class="token comment">///&lt; The radius of the agents using the tile.</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token keyword">float</span> walkableClimb<span class="token punctuation">;</span>		<span class="token comment">///&lt; The maximum climb height of the agents using the tile.</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token keyword">float</span> bmin<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>				<span class="token comment">///&lt; The minimum bounds of the tile's AABB. [(x, y, z)]</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token keyword">float</span> bmax<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>				<span class="token comment">///&lt; The maximum bounds of the tile's AABB. [(x, y, z)]</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	</pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token comment">/// The bounding volume quantization factor. </span></pre></td></tr><tr><td data-num="30"></td><td><pre>	<span class="token keyword">float</span> bvQuantFactor<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="poly"><a class="anchor" href="#poly">#</a> Poly</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Defines a polygon within a dtMeshTile object.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// @ingroup detour</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">dtPoly</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token comment">/// Index to first link in linked list. (Or #DT_NULL_LINK if there is no link.)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> firstLink<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token comment">/// The indices of the polygon's vertices.</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token comment">/// The actual vertices are located in dtMeshTile::verts.</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> verts<span class="token punctuation">[</span>DT_VERTS_PER_POLYGON<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token comment">/// Packed data representing neighbor polygons references and flags for each edge.</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> neis<span class="token punctuation">[</span>DT_VERTS_PER_POLYGON<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token comment">/// The user defined polygon flags.</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> flags<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token comment">/// The number of vertices in the polygon.</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> vertCount<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token comment">/// The bit packed area id and polygon type.</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token comment">/// @note Use the structure's set and get methods to acess this value.</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> areaAndtype<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token comment">/// Sets the user defined area id. [Limit: &lt; #DT_MAX_AREAS]</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">setArea</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> areaAndtype <span class="token operator">=</span> <span class="token punctuation">(</span>areaAndtype <span class="token operator">&amp;</span> <span class="token number">0xc0</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span>a <span class="token operator">&amp;</span> <span class="token number">0x3f</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token comment">/// Sets the polygon type. (See: #dtPolyTypes.)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">setType</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> t<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> areaAndtype <span class="token operator">=</span> <span class="token punctuation">(</span>areaAndtype <span class="token operator">&amp;</span> <span class="token number">0x3f</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;&lt;</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>	<span class="token comment">/// Gets the user defined area id.</span></pre></td></tr><tr><td data-num="32"></td><td><pre>	<span class="token keyword">inline</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> areaAndtype <span class="token operator">&amp;</span> <span class="token number">0x3f</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>	<span class="token comment">/// Gets the polygon type. (See: #dtPolyTypes)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>	<span class="token keyword">inline</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> areaAndtype <span class="token operator">>></span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="link"><a class="anchor" href="#link">#</a> Link</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Defines a link between polygons.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// @note This structure is rarely if ever used by the end user.</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/// @see dtMeshTile</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">dtLink</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	dtPolyRef ref<span class="token punctuation">;</span>					<span class="token comment">///&lt; Neighbour reference. (The neighbor that is linked to.)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> next<span class="token punctuation">;</span>				<span class="token comment">///&lt; Index of the next link.</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> edge<span class="token punctuation">;</span>				<span class="token comment">///&lt; Index of the polygon edge that owns this link.</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> side<span class="token punctuation">;</span>				<span class="token comment">///&lt; If a boundary link, defines on which side the link is.</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> bmin<span class="token punctuation">;</span>				<span class="token comment">///&lt; If a boundary link, defines the minimum sub-edge area.</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> bmax<span class="token punctuation">;</span>				<span class="token comment">///&lt; If a boundary link, defines the maximum sub-edge area.</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="polydetail"><a class="anchor" href="#polydetail">#</a> PolyDetail</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Defines the location of detail sub-mesh data within a dtMeshTile.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">dtPolyDetail</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> vertBase<span class="token punctuation">;</span>			<span class="token comment">///&lt; The offset of the vertices in the dtMeshTile::detailVerts array.</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> triBase<span class="token punctuation">;</span>			<span class="token comment">///&lt; The offset of the triangles in the dtMeshTile::detailTris array.</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> vertCount<span class="token punctuation">;</span>		<span class="token comment">///&lt; The number of vertices in the sub-mesh.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> triCount<span class="token punctuation">;</span>			<span class="token comment">///&lt; The number of triangles in the sub-mesh.</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="bvnode"><a class="anchor" href="#bvnode">#</a> BVNode</h3><ul><li>i：node 编号，正数表示叶节点在数组的下标；负数表示根节点，数值表示根节点下所有节点数量</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Bounding volume node.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// @note This structure is rarely if ever used by the end user.</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/// @see dtMeshTile</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">dtBVNode</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> bmin<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>			<span class="token comment">///&lt; Minimum bounds of the node's AABB. [(x, y, z)]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> bmax<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>			<span class="token comment">///&lt; Maximum bounds of the node's AABB. [(x, y, z)]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">int</span> i<span class="token punctuation">;</span>							<span class="token comment">///&lt; The node's index. (Negative for escape sequence.)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="offmeshconnection-相关数据-2"><a class="anchor" href="#offmeshconnection-相关数据-2">#</a> OffMeshConnection 相关数据</h2><h3 id="offmeshconnection"><a class="anchor" href="#offmeshconnection">#</a> OffMeshConnection</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Defines an navigation mesh off-mesh connection within a dtMeshTile object.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// An off-mesh connection is a user defined traversable connection made up to two vertices.</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">dtOffMeshConnection</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token comment">/// The endpoints of the connection. [(ax, ay, az, bx, by, bz)]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">float</span> pos<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token comment">/// The radius of the endpoints. [Limit: >= 0]</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">float</span> rad<span class="token punctuation">;</span>		</pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token comment">/// The polygon reference of the connection within the tile.</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">short</span> poly<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token comment">/// Link flags. </span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token comment">/// @note These are not the connection's user defined flags. Those are assigned via the </span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token comment">/// connection's dtPoly definition. These are link flags used for internal purposes.</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> flags<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token comment">/// End point side.</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> side<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token comment">/// The id of the offmesh connection. (User assigned when the navigation mesh is built.)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> userId<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="细节说明"><a class="anchor" href="#细节说明">#</a> 细节说明</h2><h3 id="neighbor-connection-data"><a class="anchor" href="#neighbor-connection-data">#</a> neighbor connection data</h3><p>用于记录相邻的前后左右「<a href="span">Span</a>」连通情况，单个方向只会记录第一个满足相邻条件的「<a href="span">Span</a>」</p><p>由 24 bit 构成，6bit 表示一个方位。如果不连通则值为 <code>0x3f</code></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/// Gets neighbor connection data for the specified direction.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">///  @param[in]		s		The span to check.</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">///  @param[in]		dir		The direction to check. [Limits: 0 &lt;= value &lt; 4]</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">///  @return The neighbor connection data for the specified direction,</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">///  	or #RC_NOT_CONNECTED if there is no connection.</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/// RC_NOT_CONNECTED == 0X3F</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">rcGetCon</span><span class="token punctuation">(</span><span class="token keyword">const</span> rcCompactSpan<span class="token operator">&amp;</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> dir<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> shift <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>dir<span class="token operator">*</span><span class="token number">6</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">return</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>con <span class="token operator">>></span> shift<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0x3f</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>dir 方向说明：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">///dir: 0~4 左前右后</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/// 0：x-1</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/// 1：z+1</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">/// 2：x+1</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/// 3：z-1</span></pre></td></tr><tr><td data-num="6"></td><td><pre>offset<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="参考资料"><a class="anchor" href="#参考资料">#</a> 参考资料</h2><ul><li>传送门大汇总：<span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC82NDQ2OWE0MTBiNWQ=">https://www.jianshu.com/p/64469a410b5d</span></li><li>unity Navigation：<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnVuaXR5M2QuY29tL01hbnVhbC9OYXZpZ2F0aW9uLmh0bWw=">https://docs.unity3d.com/Manual/Navigation.html</span></li><li>gen navmash：<span class="exturl" data-url="aHR0cDovL2NyaXR0ZXJhaS5vcmcv">http://critterai.org/</span></li><li>基础篇：<span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9jMGQyMDk2MzBjNmI=">https://www.jianshu.com/p/c0d209630c6b</span></li></ul><div class="tags"><a href="/tags/Recast-Navigation/" rel="tag"><i class="ic i-tag"></i> Recast Navigation</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-12-29 09:36:04" itemprop="dateModified" datetime="2022-12-29T09:36:04+08:00">2022-12-29</time> </span><span id="learning/recastnavigation/Recast Navigation/" class="item leancloud_visitors" data-flag-title="Recast Navigation" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 充电</button><p>请我[恰饭]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="鑫酱(●'◡'●) 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="鑫酱(●'◡'●) 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>鑫酱(●'◡'●) <i class="ic i-at"><em>@</em></i>鑫酱</li><li class="link"><strong>本文链接：</strong> <a href="https://hakuya.me/learning/recastnavigation/Recast%20Navigation/" title="Recast Navigation">https://hakuya.me/learning/recastnavigation/Recast Navigation/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/learning/japanese/primary/%E5%8D%81%E4%B8%89%E3%80%81%E6%A1%8C%E5%AD%90%E4%B8%8A%E6%9C%89%E4%B8%89%E6%9C%AC%E4%B9%A6/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;wallpaper-1255596461.cos.ap-nanjing.myqcloud.com&#x2F;wallpaper (9).jpg" title="十三、桌子上有三本书"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 日语初级</span><h3>十三、桌子上有三本书</h3></a></div><div class="item right"><a href="/learning/japanese/primary/%E5%8A%A8%E8%AF%8D%E7%AF%87/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;wallpaper-1255596461.cos.ap-nanjing.myqcloud.com&#x2F;wallpaper_6.jpg" title="动词篇"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 日语初级</span><h3>动词篇</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#recast-navigation%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB"><span class="toc-number">1.</span> <span class="toc-text">Recast Navigation 源码阅读</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E5%B1%9E%E6%80%A7"><span class="toc-number">1.1.</span> <span class="toc-text">基础属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cellsize"><span class="toc-number">1.1.1.</span> <span class="toc-text">CellSize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cellheight"><span class="toc-number">1.1.2.</span> <span class="toc-text">CellHeight</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#agentheight"><span class="toc-number">1.1.3.</span> <span class="toc-text">AgentHeight</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#agentradius"><span class="toc-number">1.1.4.</span> <span class="toc-text">AgentRadius</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#agentmaxclimb"><span class="toc-number">1.1.5.</span> <span class="toc-text">AgentMaxClimb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#maxedgeerror"><span class="toc-number">1.1.6.</span> <span class="toc-text">MaxEdgeError</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vertsperpoly"><span class="toc-number">1.1.7.</span> <span class="toc-text">VertsPerPoly</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#recast-%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.</span> <span class="toc-text">Recast 基础数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#span"><span class="toc-number">1.2.1.</span> <span class="toc-text">Span</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#spanpool"><span class="toc-number">1.2.2.</span> <span class="toc-text">SpanPool</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#heightfield"><span class="toc-number">1.2.3.</span> <span class="toc-text">Heightfield</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compactspan"><span class="toc-number">1.2.4.</span> <span class="toc-text">CompactSpan</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compactcell"><span class="toc-number">1.2.5.</span> <span class="toc-text">CompactCell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compactheightfield"><span class="toc-number">1.2.6.</span> <span class="toc-text">CompactHeightfield</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#regions-%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.</span> <span class="toc-text">Regions 相关数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#region"><span class="toc-number">1.3.1.</span> <span class="toc-text">Region</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#contour"><span class="toc-number">1.3.2.</span> <span class="toc-text">Contour</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#contourset"><span class="toc-number">1.3.3.</span> <span class="toc-text">ContourSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#contourhole"><span class="toc-number">1.3.4.</span> <span class="toc-text">ContourHole</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#contourregion"><span class="toc-number">1.3.5.</span> <span class="toc-text">ContourRegion</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#potentialdiagonal"><span class="toc-number">1.3.6.</span> <span class="toc-text">PotentialDiagonal</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mesh-%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.</span> <span class="toc-text">Mesh 相关数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#edge"><span class="toc-number">1.4.1.</span> <span class="toc-text">Edge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#polymesh"><span class="toc-number">1.4.2.</span> <span class="toc-text">PolyMesh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#polymeshdetail"><span class="toc-number">1.4.3.</span> <span class="toc-text">PolyMeshDetail</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#heightpatch"><span class="toc-number">1.4.4.</span> <span class="toc-text">HeightPatch</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#navmesh-%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.5.</span> <span class="toc-text">NavMesh 相关数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#meshtile"><span class="toc-number">1.5.1.</span> <span class="toc-text">MeshTile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#navmesh"><span class="toc-number">1.5.2.</span> <span class="toc-text">NavMesh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#navmeshparams"><span class="toc-number">1.5.3.</span> <span class="toc-text">NavMeshParams</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#navmeshcreateparams"><span class="toc-number">1.5.4.</span> <span class="toc-text">NavMeshCreateParams</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#polymesh-%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.4.1.</span> <span class="toc-text">PolyMesh 相关数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#polymeshdetail-%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.4.2.</span> <span class="toc-text">PolyMeshDetail 相关数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#offmeshconnection-%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.4.3.</span> <span class="toc-text">OffMeshConnection 相关数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tile-%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.4.4.</span> <span class="toc-text">Tile 相关数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#general-configuration-%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.4.5.</span> <span class="toc-text">General Configuration 相关数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#meshheader"><span class="toc-number">1.5.5.</span> <span class="toc-text">MeshHeader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#poly"><span class="toc-number">1.5.6.</span> <span class="toc-text">Poly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#link"><span class="toc-number">1.5.7.</span> <span class="toc-text">Link</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#polydetail"><span class="toc-number">1.5.8.</span> <span class="toc-text">PolyDetail</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bvnode"><span class="toc-number">1.5.9.</span> <span class="toc-text">BVNode</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#offmeshconnection-%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE-2"><span class="toc-number">1.6.</span> <span class="toc-text">OffMeshConnection 相关数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#offmeshconnection"><span class="toc-number">1.6.1.</span> <span class="toc-text">OffMeshConnection</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E"><span class="toc-number">1.7.</span> <span class="toc-text">细节说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#neighbor-connection-data"><span class="toc-number">1.7.1.</span> <span class="toc-text">neighbor connection data</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.8.</span> <span class="toc-text">参考资料</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/learning/recastnavigation/Recast%20Navigation/" rel="bookmark" title="Recast Navigation">Recast Navigation</a></li><li><a href="/learning/recastnavigation/SoloMesh/" rel="bookmark" title="SoloMesh">SoloMesh</a></li><li><a href="/learning/recastnavigation/3D%E5%AF%BB%E8%B7%AFNavBound/" rel="bookmark" title="3D寻路NavBound">3D寻路NavBound</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="鑫酱(●'◡'●)" data-src="/images/avatar.jpg"><p class="name" itemprop="name">鑫酱(●'◡'●)</p><div class="description" itemprop="description">整天摸鱼，却妄想拯救世界的技术宅</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">98</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">24</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">51</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FsbGVuR1g=" title="https:&#x2F;&#x2F;github.com&#x2F;AllenGX"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTgwNTM4MjQy" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;80538242"><i class="ic i-cloud-music"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjE0MTM5MDcxNTNAcXEuY29t" title="mailto:1413907153@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>好友</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>网址</a></li><li class="item"><a href="/travellings/" rel="section"><i class="ic i-paper-plane"></i>传送门</a></li><li class="item"><a href="/mikutap/" rel="section"><i class="ic i-star"></i>Mikutap</a></li><li class="item"><a href="/restart/" rel="section"><i class="ic i-sun"></i>RestartLife</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/learning/japanese/primary/%E5%8D%81%E4%B8%89%E3%80%81%E6%A1%8C%E5%AD%90%E4%B8%8A%E6%9C%89%E4%B8%89%E6%9C%AC%E4%B9%A6/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/learning/japanese/primary/%E5%8A%A8%E8%AF%8D%E7%AF%87/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game202/" title="分类于 GAME202高质量实时渲染">GAME202高质量实时渲染</a></div><span><a href="/learning/games/Game202/%E5%9B%9B%E3%80%81Real-time%20Global%20Illumination/" title="四、Real-time Global Illumination">四、Real-time Global Illumination</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%BA%8C%E3%80%81%E7%B1%BB%E5%92%8C%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" title="十二、类和动态内存分配">十二、类和动态内存分配</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game101/" title="分类于 Games101图形渲染">Games101图形渲染</a></div><span><a href="/learning/games/Game101/%E4%B8%80%E3%80%81Linear%20Algebra/" title="一、Linear Algebra">一、Linear Algebra</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E4%B8%83%E3%80%81%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/" title="七、函数指针">七、函数指针</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/physx/" title="分类于 物理引擎">物理引擎</a></div><span><a href="/learning/physx/PhysX%E2%80%94%E2%80%94Collision%E7%AF%87/" title="PhysX——Collision篇">PhysX——Collision篇</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game101/" title="分类于 Games101图形渲染">Games101图形渲染</a></div><span><a href="/learning/games/Game101/%E4%B8%89%E3%80%81Transformation%20Cont/" title="三、Transformation Cont">三、Transformation Cont</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/read/" title="分类于 阅读">阅读</a> <i class="ic i-angle-right"></i> <a href="/categories/read/psychology/" title="分类于 心理学">心理学</a></div><span><a href="/read/psychology/%E4%BA%B2%E5%AF%86%E5%85%B3%E7%B3%BB/" title="亲密关系">亲密关系</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game101/" title="分类于 Games101图形渲染">Games101图形渲染</a></div><span><a href="/learning/games/Game101/%E4%B9%9D%E3%80%81Shading%EF%BC%88%E4%B8%8B%EF%BC%89%E2%80%94%E2%80%94Texture%20Mapping%20Cont/" title="九、Shading（下）——Texture Mapping Cont">九、Shading（下）——Texture Mapping Cont</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%89%E3%80%81%E7%B1%BB%E7%BB%A7%E6%89%BF/" title="十三、类继承">十三、类继承</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game101/" title="分类于 Games101图形渲染">Games101图形渲染</a></div><span><a href="/learning/games/Game101/%E5%8D%81%E5%85%AB%E3%80%81Materials%20and%20Appearances/" title="十八、Materials and Appearances">十八、Materials and Appearances</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">鑫酱(●'◡'●) @ 个人博客</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">520k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">7:52</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"learning/recastnavigation/Recast Navigation/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/animejs@3.2.0/lib/anime.min.js,npm/katex@0.12.0/dist/contrib/copy-tex.min.js,npm/frappe-charts@1.5.0/dist/frappe-charts.min.iife.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/quicklink@2/dist/quicklink.umd.js,gh/amehime/MiniValine@4.2.2-beta10/dist/MiniValine.min.js"></script><script src="/js/app.js?v=0.2.5"></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b6d809b500bd6f0040117088899bc7bf";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html>