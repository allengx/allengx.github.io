<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="XqWEZ-KjvQT4IfXzxYvH-PEc--_zN6GqthY2jBsqOs4"><meta name="msvalidate.01" content="4E28E3FDD5912EBBB84869B17359650D"><meta name="baidu-site-verification" content="code-dwpSTDBLS2"><link rel="alternate" type="application/rss+xml" title="鑫酱" href="https://hakuya.me/rss.xml"><link rel="alternate" type="application/atom+xml" title="鑫酱" href="https://hakuya.me/atom.xml"><link rel="alternate" type="application/json" title="鑫酱" href="https://hakuya.me/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="cpp"><link rel="canonical" href="https://hakuya.me/learning/programlanguage/cpp/%E5%85%AB%E3%80%81%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/"><title>八、函数介绍 - cpp - 编程语言 - 学习 | 个人博客 = 鑫酱 = 笔记本</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">八、函数介绍</h1><div class="meta"><span class="item" title="创建时间：2021-03-02 11:47:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-03-02T11:47:00+08:00">2021-03-02</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>5.1k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>5 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">个人博客</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (16).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (23).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (3).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (2).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (11).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (9).jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learning/" itemprop="item" rel="index" title="分类于 学习"><span itemprop="name">学习</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learning/programlanguage/" itemprop="item" rel="index" title="分类于 编程语言"><span itemprop="name">编程语言</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learning/programlanguage/cpp/" itemprop="item" rel="index" title="分类于 cpp"><span itemprop="name">cpp</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://hakuya.me/learning/programlanguage/cpp/%E5%85%AB%E3%80%81%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="鑫酱(●'◡'●)"><meta itemprop="description" content="笔记本, 整天摸鱼，却妄想拯救世界的技术宅"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="鑫酱"></span><div class="body md" itemprop="articleBody"><div class="note info"><p>以下为个人学习笔记整理。参考书籍《C++ Primer Plus》</p></div><h1 id="函数介绍"><a class="anchor" href="#函数介绍">#</a> 函数介绍</h1><h2 id="c-内联函数"><a class="anchor" href="#c-内联函数">#</a> C++ 内联函数</h2><p>内联函数更像是把函数贴入到调用的位置，这样可以提高函数跳转所带来的开销。</p><p>声明内联函数：</p><ul><li>在函数声明前加上关键字 <code>inline</code> ；</li><li>在函数定义前加上关键之 <code>inline</code> ；</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">inline</span> <span class="token keyword">double</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="https://blog-1255596461.cos.ap-guangzhou.myqcloud.com/blog_pic/image-20210226104755352.png" alt="image-20210226104755352"></p><blockquote><p>内联函数不支持递归调用。不要对复杂函数使用内联修饰。</p></blockquote><h3 id="内联与宏"><a class="anchor" href="#内联与宏">#</a> 内联与宏</h3><ul><li>宏并不是通过传递参数的方式来实现的，而是简单的文本替换。</li></ul><h2 id="引用变量"><a class="anchor" href="#引用变量">#</a> 引用变量</h2><p>引用变量。相当于给变量构建一个新的别名，两个变量指代的是同一个内存地址。</p><blockquote><p>值得注意的是，引用变量和指针并不一样。不能改变所指地址， <code>int &amp; number_2 = number_1</code> 等效于 <code>int* const number_2 = &amp;number_1</code> 。</p></blockquote><h3 id="引用变量的创建"><a class="anchor" href="#引用变量的创建">#</a> 引用变量的创建</h3><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> number_1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> <span class="token operator">&amp;</span>number_2 <span class="token operator">=</span> number1<span class="token punctuation">;</span> <span class="token comment">// number_2 reference number_1</span></pre></td></tr></table></figure><h3 id="将引用作为函数参数"><a class="anchor" href="#将引用作为函数参数">#</a> 将引用作为函数参数</h3><p>按引用传递和指针传递效果类似，可以在函数内部修改传入的对象。</p><p><img data-src="https://blog-1255596461.cos.ap-guangzhou.myqcloud.com/blog_pic/image-20210226111425893.png" alt="image-20210226111425893"></p><h4 id="尽可能的使用-const"><a class="anchor" href="#尽可能的使用-const">#</a> 尽可能的使用 const</h4><ul><li><code>const</code> 可以避免无意中对引用内容的修改。</li><li><code>const</code> 可以兼容 <code>const</code> 参数和非 <code>const</code> 参数。</li><li>使用 <code>const</code> 引用，可以让函数正确生成临时变量。</li></ul><h3 id="左值和右值"><a class="anchor" href="#左值和右值">#</a> 左值和右值</h3><ul><li>左值存放在对象中，有持久的状态。（变量名）</li><li>右值要么是字面常量，要么是在表达式求值过程中创建的临时对象，没有持久的状态。</li></ul><h4 id="右值引用"><a class="anchor" href="#右值引用">#</a> 右值引用</h4><p>一种指向右值的引用。左值引用是将一个左值传递给另一个。右值引用是将一个右值传递给一个左值。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> left_ref <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span><span class="token operator">&amp;</span> left_ref_1 <span class="token operator">=</span> left_ref<span class="token punctuation">;</span> <span class="token comment">// 左值引用</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> left_ref_2 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// 右值引用</span></pre></td></tr></table></figure><h4 id="参考链接"><a class="anchor" href="#参考链接">#</a> 参考链接：</h4><ul><li><span class="exturl" data-url="aHR0cHM6Ly9saWFtLnBhZ2UvMjAxNi8xMi8xMS9ydmFsdWUtcmVmZXJlbmNlLWluLUNwcC8=">谈谈 C++ 中的右值引用</span>。</li></ul><h3 id="将引用用于结构"><a class="anchor" href="#将引用用于结构">#</a> 将引用用于结构</h3><ul><li><p>避免返回结果里的结构是函数内生成的临时变量。（离开函数后就销毁了）</p><ul><li>使用 new 来初始化对象并分配内存。</li><li>使用 「引用参数」 作为返回值。</li></ul></li><li><p>用 const 修饰需要返回的引用，可以避免出现如下的代码：</p><ul><li><code>func(number_1, number_2) = number_3;</code> ：这样的写法会导致最终的返回值被 <code>number_3</code> 覆盖。</li></ul></li></ul><h3 id="何时使用引用参数"><a class="anchor" href="#何时使用引用参数">#</a> 何时使用引用参数</h3><ul><li>程序能够修改参数内容。</li><li>复杂的参数，往往传递引用。这样可以提高效率。</li><li>对于数组和指针，传递引用是唯一的选择。最好能够设置为 const 类型。</li><li>如果数据对象是类或者结构，只能使用指针。</li></ul><h2 id="函数模板"><a class="anchor" href="#函数模板">#</a> 函数模板</h2><p>通过使用「泛型」来定义一套通用的参数类型。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>T any_a<span class="token punctuation">,</span> T any_b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> any_a <span class="token operator">+</span> any_b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>c++98 支持用 class 代替 typename，但推荐还是用 typename。</p></blockquote><h3 id="显式具体化"><a class="anchor" href="#显式具体化">#</a> 显式具体化</h3><h4 id="定义标准isoansi-c-标准"><a class="anchor" href="#定义标准isoansi-c-标准">#</a> 定义标准（ISO/ANSI C++ 标准）：</h4><ul><li>对于给定的函数名，可也有非模板函数，模板函数和显式具体化模板函数以及它们的重载版本。</li><li>显式具体化的原型和定义应该以 <code>template &lt;&gt;</code> 作为开头，并指出 <code>typename</code> 的类型。</li><li>调用优先级：<strong>非模板函数 &gt; 显式具体化模板函数 &gt; 模板函数</strong>。</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 非模板函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token function">tp_func</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"tp_func 非模板函数"</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 模板函数</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">void</span> <span class="token function">tp_func</span><span class="token punctuation">(</span>T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"tp_func 模板函数"</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 显式具体化模板函数</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token operator">></span> <span class="token keyword">void</span> tp_func<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"tp_func 显式具体化模板函数"</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">double</span><span class="token operator">&amp;&amp;</span> mm <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token keyword">double</span><span class="token operator">&amp;&amp;</span> nn <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token function">tp_func</span><span class="token punctuation">(</span>mm<span class="token punctuation">,</span> nn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 显式具体化模板函数</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    </pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> mkkm <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> nkkn <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token function">tp_func</span><span class="token punctuation">(</span>mkkm<span class="token punctuation">,</span> nkkn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 非模板函数</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    </pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token keyword">float</span><span class="token operator">&amp;&amp;</span> mffm <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token keyword">float</span><span class="token operator">&amp;&amp;</span> nffn <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token function">tp_func</span><span class="token punctuation">(</span>mffm<span class="token punctuation">,</span> nffn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 模板函数</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="实例化和具体化"><a class="anchor" href="#实例化和具体化">#</a> 实例化和具体化</h3><p>函数模板的并不会生成函数的定义，只是一个生成方案。只有在编译的时候，才会为特定的函数调用生成相应的函数定义 —— 模板实例（instantiation）</p><ul><li><p>编译时才确定函数定义的实例化，被称为隐式实例化（implicit instantiation）。</p></li><li><p>通过 <code>template</code> 来进行实例化的操作。被称为显式实例化（explicit instantiation）。</p></li></ul><h4 id="显式实例化和显示具体化意义不同"><a class="anchor" href="#显式实例化和显示具体化意义不同">#</a> 显式实例化和显示具体化意义不同！！！</h4><ul><li>显式实例化： <code>template void tp_func&lt;int&gt;(int, int)</code> 。通过模板函数生成一个模板实例。</li><li>显式具体化： <code>template&lt;&gt; void tp_func&lt;int&gt;(int, int)</code> 。不通过模板函数生成一个模板实例。</li></ul><blockquote><p>如果同时出现定义相同的「显式实例化」和「显式具体化」函数，将会出错。</p></blockquote><h3 id="编译器选择哪个版本的函数"><a class="anchor" href="#编译器选择哪个版本的函数">#</a> 编译器选择哪个版本的函数？？</h3><p>假设有下面几个函数定义：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 							<span class="token comment">//# 1</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">float</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">//# 2</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 							<span class="token comment">//# 3</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">//# 4</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">char</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">//# 5</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//# 6</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>T<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//# 7</span></pre></td></tr></table></figure><p>调用函数：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">f</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// arg type is char -> implicit conversion int</span></pre></td></tr></table></figure><p><strong>只考虑参数不考虑返回值的情况：首先排除 <code>#4</code> 和 <code>#7</code> ，由于它们都需要「指针类型」参数，而 C++ 会把 <code>char</code> 隐式转化为 <code>int</code> ，但无法转化为「指针类型」。</strong></p><p>对于函数重载，函数模板和函数模板重载，C++ 定义了一套调用顺序：</p><ul><li>step1：创建「候选函数列表」，其中包含与被调用函数名称相同的函数和函数模板。</li><li>step2：使用「候选函数列表」生成「可行函数列表」。这些都是参数数目正确的函数。这里会存在隐式转化的匹配。例如参数是 <code>float</code> 类型，隐式类型转化会把类型转为 <code>double</code> ，从而匹配上 <code>double</code> 类型的函数。</li><li>step3：确定最佳的可行函数。选取规则：<ul><li>选取之前，需要对函数参数进行转换，转换优先级如下：<ul><li>完全匹配，但 常规函数 &gt; 模板。</li><li>提升转换 （例如： <code>char</code> 和 <code>shorts</code> 自动转为 <code>int</code> ， <code>float</code> 自动转为 <code>double</code> ）。</li><li>标准转换（例如： <code>int</code> 转为 <code>char</code> ， <code>long</code> 转为 <code>double</code> ）。</li><li>用户定义转换。</li></ul></li></ul></li></ul><p><strong>考虑选取顺序：</strong></p><ul><li><p><strong>函数 #1 会优于 #2，因为 <code>char</code> 到 <code>int</code> 的转化是「提升转换」，而 <code>char</code> 到 <code>float</code> 的转化是「标准转换」</strong></p></li><li><p><strong>函数 #3 #5 #6 会优于 #1 #2，因为它们都是完全匹配</strong></p></li><li><p><strong>函数 #3 和 #5 又会优于 #6，因为 #6 是模板函数</strong></p></li></ul><h4 id="思考什么是完全匹配"><a class="anchor" href="#思考什么是完全匹配">#</a> 思考：什么是「完全匹配」？</h4><p>C++ 在进行匹配的过程中，允许一些「无关要紧的转换」。如下这些类型都算作是「完全匹配」：</p><table><thead><tr><th>从实参</th><th>到形参</th></tr></thead><tbody><tr><td>Type</td><td>Type &amp;</td></tr><tr><td>Type &amp;</td><td>Type</td></tr><tr><td>Type [ ]</td><td>* Type</td></tr><tr><td>Type（arguement-list）</td><td>Type（*）（arguement-list）</td></tr><tr><td>Type</td><td>const Type</td></tr><tr><td>Type</td><td>volatile Type</td></tr><tr><td>Type *</td><td>const Type</td></tr><tr><td>Type *</td><td>volatile Type *</td></tr></tbody></table><p>假设函数调用代码如下：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">blot</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> a<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>blot ink <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">25</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">recycle</span><span class="token punctuation">(</span>ink<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>能够和它「完全匹配」的函数定义：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">recycle</span><span class="token punctuation">(</span>blot<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//#1</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token function">recycle</span><span class="token punctuation">(</span><span class="token keyword">const</span> blot<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//#2</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">void</span> <span class="token function">recycle</span><span class="token punctuation">(</span>blot <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//#3</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">void</span> <span class="token function">recycle</span><span class="token punctuation">(</span><span class="token keyword">const</span> blot <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//#4</span></pre></td></tr></table></figure><ul><li><strong>函数 #3 优先于 #4，由于非 const 数据的指针和引用要优先于 const 数据的指针和引用。</strong></li><li><strong>函数 #1 和 #2，由于是非指针或者引用参数，所以无法区分优先级，会导致「二义性」（ambiguous）错误。</strong></li><li><strong>「非模板函数」 &gt; 「显式具体化模板函数」 &gt; 「隐式模板函数」。</strong></li><li><strong>两个「完全匹配」的模板函数，更具体的模板函数优先。</strong></li></ul><h4 id="更具体most-specialized"><a class="anchor" href="#更具体most-specialized">#</a> 更具体（most specialized）</h4><p>「更具体」并不意味着显式具体化，而是指编译器再推断类型的过程中，尽可能少的进行类型转换。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">ff</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//#1</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">ff</span><span class="token punctuation">(</span>T<span class="token operator">*</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//#2</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">blot</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> a<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>blot ink <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">ff</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ink<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// #2 更具体</span></pre></td></tr></table></figure><p>由于实参是 <code>blot</code> 的地址（指针）。所以 <code>#2</code> 的 <code>typename T</code> 被解释为 <code>blot</code> 。而 <code>#1</code> 的 <code>typename T</code> 被解释为 <code>blot*</code> 。</p><h4 id="函数优先级汇总"><a class="anchor" href="#函数优先级汇总">#</a> 函数优先级汇总：</h4><ul><li><p><strong>「完全匹配」&gt;「提升转换」&gt;「标准转换」&gt;「用户定义转换」。</strong></p></li><li><p><strong>完全匹配情况下：</strong></p><ul><li><strong>「非模板函数」 &gt; 「显式具体化模板函数」 &gt; 「隐式模板函数」</strong>。</li><li><strong>都是模板函数的情况下，「更具体」的优先。</strong></li><li><strong>非 const 数据的指针和引用要优先于 const 数据的指针和引用。</strong></li></ul></li></ul><p>在函数调用过程中，可以指定函数优先选择模板定义：</p><p>再调用函数的名称后面加上 <code>&lt;&gt;</code> 可以优先匹配模板函数。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>T <span class="token function">lesser</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> T b<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">//#1</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">lesser</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//#2</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">double</span> m <span class="token operator">=</span> <span class="token number">1.1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">double</span> n <span class="token operator">=</span> <span class="token number">2.2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">lesser</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> 		<span class="token comment">// call #2</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">lesser</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span>			<span class="token comment">// call #1 with double</span></pre></td></tr><tr><td data-num="12"></td><td><pre>lesser<span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>		<span class="token comment">// call #1 with int</span></pre></td></tr><tr><td data-num="13"></td><td><pre>lesser<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span>	<span class="token comment">// call #1 with int</span></pre></td></tr></table></figure><h3 id="模板函数的发展"><a class="anchor" href="#模板函数的发展">#</a> 模板函数的发展</h3><h4 id="关键字-decltypec11"><a class="anchor" href="#关键字-decltypec11">#</a> 关键字 decltype（C++11）</h4><p>C++11 新增的关键字 <code>decltype</code> 提供了一种解决推断类型的问题。例如：</p><p>如下情况下在 C++98 中， <code>xpy</code> 的类型将无法确定，他可能是 <code>T1</code> ，也可能是 <code>T2</code> ，也可能是其他类型。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// C++ 98 问题</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T1</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">void</span> <span class="token function">tf</span><span class="token punctuation">(</span>T1 x<span class="token punctuation">,</span> T2 y<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token operator">?</span>type<span class="token operator">?</span> xpy <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// C++ 11 处理办法</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">void</span> <span class="token function">tf</span><span class="token punctuation">(</span>T1 x<span class="token punctuation">,</span> T2 y<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">decltype</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span> xpy <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>假如有如下声明：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">decltype</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span> var<span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>如果 <code>expression</code> 没有被括号括起来，则 <code>var</code> 的类型和 <code>expression</code> 相同。 <code>decltype(x) var;</code></li><li>如果 <code>expression</code> 是一个函数调用，则 <code>var</code> 的类型是函数的返回值。 <code>decltype(f()) var;</code></li><li>如果 <code>expression</code> 是一个左值（变量），则 <code>var</code> 的类型是左值的<strong>引用</strong>。 <code>decltype((左值)) var;</code></li><li>如果 <code>expression</code> 不满足以上三种情况，则 <code>var</code> 的类型和 <code>expression</code> 相同。 <code>decltype(x+1) var;decltype(100) var;</code></li></ul><h4 id="新的问题"><a class="anchor" href="#新的问题">#</a> 新的问题</h4><p>如果函数的返回值类型是如下的情况，将没有办法通过 <code>decltype</code> 来定义返回值类型，因为在函数声明之前变量 <code>x</code> 和 <code>y</code> 还没有被定义。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T1</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">?</span>type<span class="token operator">?</span> <span class="token function">tf</span><span class="token punctuation">(</span>T1 x<span class="token punctuation">,</span> T2 y<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>auto</code> 可以帮助我们解决这个问题：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T1</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">T2</span><span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">auto</span> <span class="token function">tf</span><span class="token punctuation">(</span>T1 x<span class="token punctuation">,</span> T2 y<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">decltype</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><div class="tags"><a href="/tags/cpp/" rel="tag"><i class="ic i-tag"></i> cpp</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-12-29 09:36:04" itemprop="dateModified" datetime="2022-12-29T09:36:04+08:00">2022-12-29</time> </span><span id="learning/programlanguage/cpp/八、函数介绍/" class="item leancloud_visitors" data-flag-title="八、函数介绍" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 充电</button><p>请我[恰饭]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="鑫酱(●'◡'●) 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="鑫酱(●'◡'●) 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>鑫酱(●'◡'●) <i class="ic i-at"><em>@</em></i>鑫酱</li><li class="link"><strong>本文链接：</strong> <a href="https://hakuya.me/learning/programlanguage/cpp/%E5%85%AB%E3%80%81%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/" title="八、函数介绍">https://hakuya.me/learning/programlanguage/cpp/八、函数介绍/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/learning/programlanguage/cpp/%E4%B8%83%E3%80%81%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;wallpaper-1255596461.cos.ap-nanjing.myqcloud.com&#x2F;wallpaper_4.jpg" title="七、函数指针"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> cpp</span><h3>七、函数指针</h3></a></div><div class="item right"><a href="/learning/programlanguage/cpp/%E4%B9%9D%E3%80%81%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;wallpaper-1255596461.cos.ap-nanjing.myqcloud.com&#x2F;wallpaper (20).jpg" title="九、内存模型和名称空间"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> cpp</span><h3>九、内存模型和名称空间</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">函数介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#c-%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.</span> <span class="toc-text">C++ 内联函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%81%94%E4%B8%8E%E5%AE%8F"><span class="toc-number">1.1.1.</span> <span class="toc-text">内联与宏</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.</span> <span class="toc-text">引用变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%8F%98%E9%87%8F%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.2.1.</span> <span class="toc-text">引用变量的创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%BC%95%E7%94%A8%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">将引用作为函数参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%BD%E5%8F%AF%E8%83%BD%E7%9A%84%E4%BD%BF%E7%94%A8-const"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">尽可能的使用 const</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E5%80%BC%E5%92%8C%E5%8F%B3%E5%80%BC"><span class="toc-number">1.2.3.</span> <span class="toc-text">左值和右值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">右值引用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">参考链接：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%BC%95%E7%94%A8%E7%94%A8%E4%BA%8E%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.4.</span> <span class="toc-text">将引用用于结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E5%BC%95%E7%94%A8%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.5.</span> <span class="toc-text">何时使用引用参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.3.</span> <span class="toc-text">函数模板</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E5%85%B7%E4%BD%93%E5%8C%96"><span class="toc-number">1.3.1.</span> <span class="toc-text">显式具体化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E6%A0%87%E5%87%86isoansi-c-%E6%A0%87%E5%87%86"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">定义标准（ISO&#x2F;ANSI C++ 标准）：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%92%8C%E5%85%B7%E4%BD%93%E5%8C%96"><span class="toc-number">1.3.2.</span> <span class="toc-text">实例化和具体化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%92%8C%E6%98%BE%E7%A4%BA%E5%85%B7%E4%BD%93%E5%8C%96%E6%84%8F%E4%B9%89%E4%B8%8D%E5%90%8C"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">显式实例化和显示具体化意义不同！！！</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%99%A8%E9%80%89%E6%8B%A9%E5%93%AA%E4%B8%AA%E7%89%88%E6%9C%AC%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.3.</span> <span class="toc-text">编译器选择哪个版本的函数？？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%9D%E8%80%83%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%8C%E5%85%A8%E5%8C%B9%E9%85%8D"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">思考：什么是「完全匹配」？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E5%85%B7%E4%BD%93most-specialized"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">更具体（most specialized）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BC%98%E5%85%88%E7%BA%A7%E6%B1%87%E6%80%BB"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">函数优先级汇总：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">1.3.4.</span> <span class="toc-text">模板函数的发展</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97-decltypec11"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">关键字 decltype（C++11）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">新的问题</span></a></li></ol></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/learning/programlanguage/cpp/%E5%9B%9B%E3%80%81%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B/" rel="bookmark" title="四、复合类型">四、复合类型</a></li><li><a href="/learning/programlanguage/cpp/%E5%85%AD%E3%80%81%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5%E5%92%8C%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="bookmark" title="六、分支语句和逻辑表达式">六、分支语句和逻辑表达式</a></li><li><a href="/learning/programlanguage/cpp/%E4%BA%94%E3%80%81%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%85%B3%E7%B3%BB%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="bookmark" title="五、循环和关系表达式">五、循环和关系表达式</a></li><li><a href="/learning/programlanguage/cpp/%E4%B8%89%E3%80%81%E6%96%87%E4%BB%B6%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/" rel="bookmark" title="三、文件输入输出">三、文件输入输出</a></li><li><a href="/learning/programlanguage/cpp/%E4%B8%83%E3%80%81%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/" rel="bookmark" title="七、函数指针">七、函数指针</a></li><li class="active"><a href="/learning/programlanguage/cpp/%E5%85%AB%E3%80%81%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/" rel="bookmark" title="八、函数介绍">八、函数介绍</a></li><li><a href="/learning/programlanguage/cpp/%E4%B9%9D%E3%80%81%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/" rel="bookmark" title="九、内存模型和名称空间">九、内存模型和名称空间</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E3%80%81%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB/" rel="bookmark" title="十、对象和类">十、对象和类</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E7%B1%BB/" rel="bookmark" title="十一、使用类">十一、使用类</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%BA%8C%E3%80%81%E7%B1%BB%E5%92%8C%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" rel="bookmark" title="十二、类和动态内存分配">十二、类和动态内存分配</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%89%E3%80%81%E7%B1%BB%E7%BB%A7%E6%89%BF/" rel="bookmark" title="十三、类继承">十三、类继承</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E5%9B%9B%E3%80%81C++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/" rel="bookmark" title="十四、C++中的代码重用">十四、C++中的代码重用</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%BA%94%E3%80%81%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/" rel="bookmark" title="十五、友元、异常和其他">十五、友元、异常和其他</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E5%85%AD%E3%80%81string%20%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/" rel="bookmark" title="十六、string 类和标准模板库">十六、string 类和标准模板库</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%83%E3%80%81%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA%E5%92%8C%E6%96%87%E4%BB%B6/" rel="bookmark" title="十七、输入、输出和文件">十七、输入、输出和文件</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E5%85%AB%E3%80%81C++11%E6%96%B0%E5%8A%9F%E8%83%BD/" rel="bookmark" title="十八、C++11新功能">十八、C++11新功能</a></li><li><a href="/learning/programlanguage/cpp/%E6%9D%82%E9%A1%B9/" rel="bookmark" title="杂项">杂项</a></li><li><a href="/learning/programlanguage/cpp/C++%E4%B8%AD%E7%9A%84extern/" rel="bookmark" title="C++中的extern">C++中的extern</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="鑫酱(●'◡'●)" data-src="/images/avatar.jpg"><p class="name" itemprop="name">鑫酱(●'◡'●)</p><div class="description" itemprop="description">整天摸鱼，却妄想拯救世界的技术宅</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">110</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">25</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">67</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FsbGVuR1g=" title="https:&#x2F;&#x2F;github.com&#x2F;AllenGX"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTgwNTM4MjQy" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;80538242"><i class="ic i-cloud-music"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjE0MTM5MDcxNTNAcXEuY29t" title="mailto:1413907153@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>好友</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>网址</a></li><li class="item"><a href="/travellings/" rel="section"><i class="ic i-paper-plane"></i>传送门</a></li><li class="item"><a href="/mikutap/" rel="section"><i class="ic i-star"></i>Mikutap</a></li><li class="item"><a href="/restart/" rel="section"><i class="ic i-sun"></i>RestartLife</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/learning/programlanguage/cpp/%E4%B8%83%E3%80%81%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/learning/programlanguage/cpp/%E4%B9%9D%E3%80%81%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game101/" title="分类于 Games101图形渲染">Games101图形渲染</a></div><span><a href="/learning/games/Game101/%E4%B8%83%E3%80%81Shading%EF%BC%88%E4%B8%8A%EF%BC%89%E2%80%94%E2%80%94Light/" title="七、Shading（上）——Light">七、Shading（上）——Light</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game101/" title="分类于 Games101图形渲染">Games101图形渲染</a></div><span><a href="/learning/games/Game101/%E5%8D%81%E5%9B%9B%E3%80%81Ray%20Tracing%20&&%20Rasterization/" title="十四、Ray Tracing &amp;&amp; Rasterization">十四、Ray Tracing && Rasterization</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/physx/" title="分类于 物理引擎">物理引擎</a></div><span><a href="/learning/physx/PhysX%E2%80%94%E2%80%94Memory%20Management%E7%AF%87/" title="PhysX——Memory Management篇">PhysX——Memory Management篇</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%BA%94%E3%80%81%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/" title="十五、友元、异常和其他">十五、友元、异常和其他</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E5%85%AB%E3%80%81%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/" title="八、函数介绍">八、函数介绍</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E7%B1%BB/" title="十一、使用类">十一、使用类</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/unreal/" title="分类于 UE">UE</a></div><span><a href="/learning/unreal/Unreal%20Iris%EF%BC%88%E4%BA%94%EF%BC%89BaseLine%20&&%20DeltaCompression/" title="Unreal Iris（五）BaseLine &amp;&amp; DeltaCompression">Unreal Iris（五）BaseLine && DeltaCompression</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/unreal/" title="分类于 UE">UE</a></div><span><a href="/learning/unreal/Unreal%20Chaos%20%E5%AF%BC%E5%87%BA%E4%B8%BA%20PhysX%20%E7%89%A9%E7%90%86%E6%96%87%E4%BB%B6/" title="Unreal Chaos 导出为 PhysX 物理文件">Unreal Chaos 导出为 PhysX 物理文件</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/read/" title="分类于 阅读">阅读</a> <i class="ic i-angle-right"></i> <a href="/categories/read/psychology/" title="分类于 心理学">心理学</a></div><span><a href="/read/psychology/%E5%B0%91%E6%9C%89%E4%BA%BA%E8%B5%B0%E7%9A%84%E8%B7%AF%E3%80%8C4%E3%80%8D/" title="少有人走的路「4」，在焦虑的年代获得精神的成长">少有人走的路「4」，在焦虑的年代获得精神的成长</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game202/" title="分类于 GAME202高质量实时渲染">GAME202高质量实时渲染</a></div><span><a href="/learning/games/Game202/%E5%85%AD%E3%80%81Real-time%20Ray%20Tracing/" title="六、Real-time Ray Tracing">六、Real-time Ray Tracing</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">鑫酱(●'◡'●) @ 个人博客</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">641k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">9:43</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"learning/programlanguage/cpp/八、函数介绍/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/animejs@3.2.0/lib/anime.min.js,npm/katex@0.12.0/dist/contrib/copy-tex.min.js,npm/frappe-charts@1.5.0/dist/frappe-charts.min.iife.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/quicklink@2/dist/quicklink.umd.js,gh/amehime/MiniValine@4.2.2-beta10/dist/MiniValine.min.js"></script><script src="/js/app.js?v=0.2.5"></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b6d809b500bd6f0040117088899bc7bf";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html>