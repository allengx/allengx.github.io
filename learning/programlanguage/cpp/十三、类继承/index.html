<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="XqWEZ-KjvQT4IfXzxYvH-PEc--_zN6GqthY2jBsqOs4"><meta name="msvalidate.01" content="4E28E3FDD5912EBBB84869B17359650D"><meta name="baidu-site-verification" content="code-dwpSTDBLS2"><link rel="alternate" type="application/rss+xml" title="鑫酱" href="https://hakuya.me/rss.xml"><link rel="alternate" type="application/atom+xml" title="鑫酱" href="https://hakuya.me/atom.xml"><link rel="alternate" type="application/json" title="鑫酱" href="https://hakuya.me/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="C++"><link rel="canonical" href="https://hakuya.me/learning/programlanguage/cpp/%E5%8D%81%E4%B8%89%E3%80%81%E7%B1%BB%E7%BB%A7%E6%89%BF/"><title>十三、类继承 - cpp - 编程语言 - 学习 | 个人博客 = 鑫酱 = 笔记本</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">十三、类继承</h1><div class="meta"><span class="item" title="创建时间：2021-03-11 16:56:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-03-11T16:56:00+08:00">2021-03-11</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>6.3k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>6 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">个人博客</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (9).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (4).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (16).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper_4.jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper (10).jpg"></li><li class="item" data-background-image="https://wallpaper-1255596461.cos.ap-nanjing.myqcloud.com/wallpaper_2.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learning/" itemprop="item" rel="index" title="分类于 学习"><span itemprop="name">学习</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learning/programlanguage/" itemprop="item" rel="index" title="分类于 编程语言"><span itemprop="name">编程语言</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/learning/programlanguage/cpp/" itemprop="item" rel="index" title="分类于 cpp"><span itemprop="name">cpp</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://hakuya.me/learning/programlanguage/cpp/%E5%8D%81%E4%B8%89%E3%80%81%E7%B1%BB%E7%BB%A7%E6%89%BF/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="鑫酱(●'◡'●)"><meta itemprop="description" content="笔记本, 整天摸鱼，却妄想拯救世界的技术宅"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="鑫酱"></span><div class="body md" itemprop="articleBody"><div class="note info"><p>以下为个人学习笔记整理。参考书籍《C++ Primer Plus》</p></div><h1 id="类继承"><a class="anchor" href="#类继承">#</a> 类继承</h1><p>类继承可以提供到的一些功能：</p><ul><li>在已有类的基础上添加新的功能。</li><li>可以给类添加数据。</li><li>可以修改类方法的行为。</li></ul><h2 id="一个简单的基类"><a class="anchor" href="#一个简单的基类">#</a> 一个简单的基类</h2><p>编写一个简单的 <code>Worker</code> 类：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// .h</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">BASE_CLASS_H</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression">BASE_CLASS_H</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">using</span> std<span class="token operator">::</span>string<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	string frist_name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	string last_name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">bool</span> has_work<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token function">Worker</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> hw <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token keyword">bool</span> <span class="token function">HasWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> has_work<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">SetWorkState</span><span class="token punctuation">(</span><span class="token keyword">bool</span> state<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> has_work <span class="token operator">=</span> state<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// !BASE_CLASS_H</span></span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// .cpp</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"base_class.h"</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token class-name">Worker</span><span class="token operator">::</span><span class="token function">Worker</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln<span class="token punctuation">,</span> <span class="token keyword">bool</span> hw<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">frist_name</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">last_name</span><span class="token punctuation">(</span>ln<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">has_work</span><span class="token punctuation">(</span>hw<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">Worker</span><span class="token operator">::</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> last_name <span class="token operator">&lt;&lt;</span> <span class="token string">", "</span> <span class="token operator">&lt;&lt;</span> frist_name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="生成一个派生类"><a class="anchor" href="#生成一个派生类">#</a> 生成一个派生类</h3><p>创建一个类 <code>Engineer</code> ，继承自 <code>Worker</code> 。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Worker</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">//...</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>上述代码完成了如下工作：</p><ul><li>派生类对象存储了基类的数据成员。（派生类继承了基类的实现）</li><li>派生类对象可以使用基类的方法。（派生类继承了基类的接口）</li></ul><p>因此 <code>Engineer</code> 可以记录姓名（使用属性）以及方法（ <code>Name()、HasWork()、SetWorkState()</code> ）</p><h4 id="需要在继承特性中加入些什么呢"><a class="anchor" href="#需要在继承特性中加入些什么呢">#</a> 需要在继承特性中加入些什么呢🤔?</h4><ul><li>派生类需要自己的构造函数。</li><li>派生类可以根据需要添加额外的数据成员和成员函数。</li></ul><h4 id="让我们来加个码代码的接口"><a class="anchor" href="#让我们来加个码代码的接口">#</a> 让我们来加个码代码的接口：</h4><p>现在 <code>Engineer</code> 出了名字和工作外，还有了 <code>title</code> 以及 <code>Code</code> 的能力～</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// .h</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Worker</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	string title<span class="token punctuation">;</span> <span class="token comment">// Engineer title</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token function">Engineer</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln<span class="token punctuation">,</span> <span class="token keyword">bool</span> hw <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> t <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">//.cpp</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 构造函数内别忘了初始化基类「Worker」。</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token class-name">Engineer</span><span class="token operator">::</span><span class="token function">Engineer</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln<span class="token punctuation">,</span> <span class="token keyword">bool</span> hw<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> t<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">title</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Worker</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span>ln<span class="token punctuation">,</span>hw<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">Engineer</span><span class="token operator">::</span><span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"["</span> <span class="token operator">&lt;&lt;</span> title <span class="token operator">&lt;&lt;</span> <span class="token string">"]: coding..."</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>但是有一点需要注意： <code>Engineer</code> 类中不能直接访问 <code>Worker</code> 的私有成员：</p><p><img data-src="https://blog-1255596461.cos.ap-guangzhou.myqcloud.com/blog_pic/image-20210311102512457.png" alt="image-20210311102512457"></p><h3 id="构造函数访问权限考虑"><a class="anchor" href="#构造函数访问权限考虑">#</a> 构造函数：访问权限考虑</h3><p>由于派生类不能直接访问基类的私有成员，而必须通过基类提供的方法进行访问。</p><p>因此，初始化构造函数时，对于基类成员的初始化必须用构造函数列表的形式：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Engineer</span><span class="token operator">::</span><span class="token function">Engineer</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln<span class="token punctuation">,</span> <span class="token keyword">bool</span> hw<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> t<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">title</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Worker</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span>ln<span class="token punctuation">,</span>hw<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>如果不显式的指明基类的构造函数，编译器会默认使用基类的默认构造函数：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Engineer</span><span class="token operator">::</span><span class="token function">Engineer</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln<span class="token punctuation">,</span> <span class="token keyword">bool</span> hw<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> t<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">title</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Engineer</span><span class="token operator">::</span><span class="token function">Engineer</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln<span class="token punctuation">,</span> <span class="token keyword">bool</span> hw<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> t<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">title</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token function">Worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>有关派生类构造函数的要点：</p><ul><li>构造函数首先会创建基类对象。</li><li>派生类构造函数应通过成员初始化列表将基类信息传递给基类构造函数。</li><li>派生类构造函数可以初始化派生类的新增数据成员。</li></ul><h3 id="析构函数"><a class="anchor" href="#析构函数">#</a> 析构函数</h3><p>值得注意的时，析构函数的调用顺序正好和构造函数相反：先调用派生类的析构函数，然后在调用基类的析构函数。</p><h3 id="使用派生类"><a class="anchor" href="#使用派生类">#</a> 使用派生类</h3><p>要使用派生类，程序必须能够访问基类声明，因此最好把派生类和基类的声明放在同一个头文件内。</p><h3 id="派生类和基类之间的特殊关系"><a class="anchor" href="#派生类和基类之间的特殊关系">#</a> 派生类和基类之间的特殊关系</h3><ul><li>派生类可以使用基类的方法，前提是方法不能是私有的。</li><li>基类指针可以在不进行显式转换的情况下指向派生类对象，基类引用也是如此。但这种关系是单向的，不可用将基类对象的地址赋给派生类引用和指针：</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>Engineer ee <span class="token punctuation">&#123;</span> <span class="token string">"ming"</span><span class="token punctuation">,</span> <span class="token string">"xiao"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token string">"game-engineer"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>Worker<span class="token operator">*</span> w <span class="token operator">=</span> <span class="token operator">&amp;</span>ee<span class="token punctuation">;</span> <span class="token comment">// ok</span></pre></td></tr><tr><td data-num="3"></td><td><pre>w<span class="token operator">-></span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>Worker<span class="token operator">&amp;</span> wk <span class="token operator">=</span> ee<span class="token punctuation">;</span> <span class="token comment">// ok</span></pre></td></tr><tr><td data-num="6"></td><td><pre>wk<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>Worker kk<span class="token punctuation">&#123;</span> <span class="token string">"ming"</span><span class="token punctuation">,</span> <span class="token string">"hong"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>Engineer<span class="token operator">*</span> eg <span class="token operator">=</span> <span class="token operator">&amp;</span>kk<span class="token punctuation">;</span> <span class="token comment">// fail</span></pre></td></tr><tr><td data-num="10"></td><td><pre>Engineer<span class="token operator">&amp;</span> egr <span class="token operator">=</span> kk<span class="token punctuation">;</span> <span class="token comment">// fail</span></pre></td></tr></table></figure><ul><li>需要注意的是，基类指针和基类引用只能调用基类方法，和访问基类成员。</li></ul><h2 id="继承is-a-关系"><a class="anchor" href="#继承is-a-关系">#</a> 继承：is-a 关系</h2><p><img data-src="https://blog-1255596461.cos.ap-guangzhou.myqcloud.com/blog_pic/image-20210311141003198.png" alt="image-20210311141003198" title="is-a 和 has-a 关系"></p><h2 id="多态公有继承"><a class="anchor" href="#多态公有继承">#</a> 多态公有继承</h2><p>有时候，我们会希望派生类的某些功能和基类相似，但是又有一些不同之处。这种复杂的行为称为多态 —— 具有多种形态，即：同一种函数在不同的调用对象上表现出了不同的行为。有以下两个机制可以用于实现多态公有继承：</p><ul><li>在派生类中重新定义基类的方法。</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// base</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	string frist_name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	string last_name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">bool</span> has_work<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token function">Worker</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> hw <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">bool</span> <span class="token function">HasWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> has_work<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// extend</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Worker</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	string title<span class="token punctuation">;</span> <span class="token comment">// Engineer title</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token function">Engineer</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln<span class="token punctuation">,</span> <span class="token keyword">bool</span> hw <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> t <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span> <span class="token comment">// 重新定义一个 Name 函数</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>使用虚方法 —— <code>virtual</code> ，该关键字只能用于类声明，不能用在类定义。</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// base</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	string frist_name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	string last_name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">bool</span> has_work<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token function">Worker</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> hw <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">bool</span> <span class="token function">HasWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> has_work<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetWorkState</span><span class="token punctuation">(</span><span class="token keyword">bool</span> state<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> has_work <span class="token operator">=</span> state<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// extend</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Worker</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	string title<span class="token punctuation">;</span> <span class="token comment">// Engineer title</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token function">Engineer</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> fn<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> ln<span class="token punctuation">,</span> <span class="token keyword">bool</span> hw <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> t <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// 可以通过 BaseClass::Func () 的方式调用父类的方法。</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetWorkState</span><span class="token punctuation">(</span><span class="token keyword">bool</span> state<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">Worker</span><span class="token operator">::</span><span class="token function">SetWorkState</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span> title <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="虚析构函数"><a class="anchor" href="#虚析构函数">#</a> 虚析构函数</h3><p>虚析构函数的作用是能够保证对象在调用析构函数时，按照正常的顺序调用父类的析构函数。否则只会调用类对象本身的析构函数，这样往往会在基类构造函数定义了某些 <code>new</code> 创建的对象时出现问题。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Worker</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>如果要在派生类中重新定义基类的方法，应该把其声明为虚的。</p></blockquote><h2 id="静态联编和动态联编"><a class="anchor" href="#静态联编和动态联编">#</a> 静态联编和动态联编</h2><p>程序在调用函数时，如何确定执行那一段代码块呢？这个问题就得问问编译器了。将源代码中的函数调用解释为执行特定函数的代码块被称为函数名联编（binding）。如何确定这种联编呢？一种方式是在编译过程中进行的，称为静态联编（static binding）。另一种是在程序运行过程中进行的，被称为动态联编（dynamic binding）。</p><h3 id="指针和引用类型的兼容"><a class="anchor" href="#指针和引用类型的兼容">#</a> 指针和引用类型的兼容</h3><p>在 C++ 中，动态联编主要是通过指针和引用的方式，这种动态的行为，某种程度上是由继承控制的。</p><p>C++ 通常情况下是不允许把一种类型的「指针」或是「引用」赋值给另一种类型，然而对于派生类对象和基类对象则例外。</p><ul><li>将派生类引用或者指针转为基类引用或者指针的方式被称为「向上强制转换（upcasting）」，这种转换方式不需要显式调用。因为派生类本身就是向上「兼容」的。</li><li>相反，从基类指针或是引用转为派生类的指针或是引用的方式被称为「向下强制转换（downcasting）」，这种方式必须使用显式的类型转换。因为基类到派生类的过程是不向下兼容的，派生类的功能往往比基类多。这种转换往往伴随着一些风险。</li></ul><p><img data-src="https://blog-1255596461.cos.ap-guangzhou.myqcloud.com/blog_pic/image-20210311144550514.png" alt="image-20210311144550514"></p><h3 id="虚成员函数和动态联编"><a class="anchor" href="#虚成员函数和动态联编">#</a> 虚成员函数和动态联编</h3><p>只有被定义为虚函数的方法才会被动态联编，因而才能实现多态的效果。</p><h4 id="为什么会有两种不同的联编方式"><a class="anchor" href="#为什么会有两种不同的联编方式">#</a> 为什么会有两种不同的联编方式❓</h4><ul><li>效率：静态联编的效率比较高。</li><li>概念模型：某些函数虽然会被重写，但是其本身并不希望实现多态效果，这时候，默认的静态联编是一个很好的替代方案。</li></ul><h4 id="虚函数的工作原理"><a class="anchor" href="#虚函数的工作原理">#</a> 虚函数的工作原理</h4><p>C++ 定义了虚函数的行为，但具体的实现需要让编译器作者来完成。</p><p>通常情况下，编译器对于虚函数的处理方法是：为每个对象添加一个隐藏成员。该成员中保存了一个指向函数地址数组的指针。这种数组被称之为虚函数表（virtual function table，vbl）。</p><p>例如：基类对象包含了一个保存所有该类内的虚函数声明地址的数组，同样，每个派生类也有这么一个对象。不同之处在于：如果存在派生类也定义的虚函数，那么虚函数地址所存储的虚函数将是派生类而非基类的。</p><p>因此如果一个基类指针指向的派生类对象调用一个在派生类和基类同时定义的虚函数，编译器会选择派生类所定义的虚函数进行执行。</p><p><img data-src="https://blog-1255596461.cos.ap-guangzhou.myqcloud.com/blog_pic/image-20210311154447937.png" alt="image-20210311154447937"></p><p>复杂的功能往往伴随性一定的成本，虚函数也是如此：</p><ul><li>每个对象都变大了，需要额外的空间用来存储虚函数表。</li><li>对于每个类，编译器都需要创建一个虚函数表。</li><li>每个虚函数的调用，都需要去虚函数表执行一次查询操作。</li></ul><h3 id="关于虚函数注意事项"><a class="anchor" href="#关于虚函数注意事项">#</a> 关于虚函数注意事项</h3><ul><li>在基类方法的声明中使用关键字 <code>virtual</code> 可以使得该方法在基类以及所有的派生类中都为虚函数。</li><li>如果使用指向对象的引用或指针来调用虚方法，程序将使用调用对象类型所定义的虚方法，而不适用指针或引用对象本身的类型，该特性也被称为「多态」。</li><li>如果定义的类将被用作基类，则应该将那些需要在派生类中重新定义的方法声明为虚的。</li></ul><h4 id="构造函数"><a class="anchor" href="#构造函数">#</a> 构造函数</h4><p>构造函数不能是虚的，原因也很简单，派生类并不需要重新定义基类的构造函数。</p><h4 id="析构函数-2"><a class="anchor" href="#析构函数-2">#</a> 析构函数</h4><p>虚构函数应该定义为虚的，除非该类不用做基类。原因见上述<a href="#%E8%99%9A%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0">虚析构函数</a>。此外，就算该类不是基类，也可以定义虚构造函数，只是会有一些性能开销。</p><h4 id="友元"><a class="anchor" href="#友元">#</a> 友元</h4><p>友元函数不能是虚函数，因为友元函数本身就不是类成员，不能被继承，也就没有任何意义。</p><h4 id="派生类没有重新定义虚函数"><a class="anchor" href="#派生类没有重新定义虚函数">#</a> 派生类没有重新定义虚函数</h4><ul><li>如果派生类没有重新定义虚函数，将会使用基类的版本。</li><li>如果派生类位于派生链中，则将使用最新的虚函数版本（多继承情况下派生类的派生类可能会使用派生类本身的虚函数而非基类）。</li></ul><h4 id="重新定义将隐藏方法"><a class="anchor" href="#重新定义将隐藏方法">#</a> 重新定义将隐藏方法</h4><p>重载虚函数可能会导致虚函数被覆盖（隐藏）：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetWorkState</span><span class="token punctuation">(</span><span class="token keyword">bool</span> state<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> has_work <span class="token operator">=</span> state<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetWorkState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>Engineer e<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>e<span class="token punctuation">.</span><span class="token function">SetWorkState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// ok</span></pre></td></tr><tr><td data-num="15"></td><td><pre>e<span class="token punctuation">.</span><span class="token function">SetWorkState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// fail</span></pre></td></tr></table></figure><p>这里还有一个注意事项：</p><ul><li>如果重新定义继承的方法，应该保证与原来的原型完全相同。</li><li>如果返回类型是基类引用或者指针，修改为派生类引用或者指针是被允许的，这种新特性被称为返回类型协变（covariance of return type）。</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">virtual</span> Worker<span class="token operator">&amp;</span> <span class="token function">SetWorkState</span><span class="token punctuation">(</span><span class="token keyword">bool</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">virtual</span> Engineer<span class="token operator">&amp;</span> <span class="token function">SetWorkState</span><span class="token punctuation">(</span><span class="token keyword">bool</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// is ok</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="访问控制protected"><a class="anchor" href="#访问控制protected">#</a> 访问控制：protected</h2><p><code>protected</code> 关键字和 <code>private</code> 有点类似，表示在类外不能直接访问 <code>protected</code> 成员。两者区别在于：</p><ul><li>派生类对象可以直接访问基类的 <code>protected</code> 成员。</li></ul><h3 id="汇总"><a class="anchor" href="#汇总">#</a> 汇总：</h3><ul><li><code>public</code> ：类内类外都可访问。</li><li><code>protected</code> ：类内可，类外不可。</li><li><code>private</code> ：类内类外都不可。</li></ul><h2 id="抽象基类"><a class="anchor" href="#抽象基类">#</a> 抽象基类</h2><p>抽象类要求必须至少有一个虚函数是纯虚函数。并且所有的派生类都必须实现纯虚函数。因此纯虚函数更像是一个「接口的约定」。</p><h4 id="纯虚函数的声明"><a class="anchor" href="#纯虚函数的声明">#</a> 纯虚函数的声明：</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">virtual</span> xxx <span class="token function">FuncName</span><span class="token punctuation">(</span>XX x<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="继承和动态内存分配"><a class="anchor" href="#继承和动态内存分配">#</a> 继承和动态内存分配</h2><p>派生类本身如果定义了 <code>new</code> 创建的对象，那么派生类本身必须显式实现「析构函数」「赋值构造函数」「复制构造函数」来回收内存。</p><p>并且如果基类同样定义了 <code>new</code> 创建的对象，还需要通过基类提供的方式一并进行处理（析构函数除外，编译器会帮你主动调用基类的析构函数）。</p><h2 id="成员属性继承"><a class="anchor" href="#成员属性继承">#</a> 成员属性继承：</h2><p><img data-src="https://blog-1255596461.cos.ap-guangzhou.myqcloud.com/blog_pic/image-20210311165411442.png" alt="image-20210311165411442"></p><div class="tags"><a href="/tags/C/" rel="tag"><i class="ic i-tag"></i> C++</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-12-29 09:36:04" itemprop="dateModified" datetime="2022-12-29T09:36:04+08:00">2022-12-29</time> </span><span id="learning/programlanguage/cpp/十三、类继承/" class="item leancloud_visitors" data-flag-title="十三、类继承" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 充电</button><p>请我[恰饭]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="鑫酱(●'◡'●) 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="鑫酱(●'◡'●) 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>鑫酱(●'◡'●) <i class="ic i-at"><em>@</em></i>鑫酱</li><li class="link"><strong>本文链接：</strong> <a href="https://hakuya.me/learning/programlanguage/cpp/%E5%8D%81%E4%B8%89%E3%80%81%E7%B1%BB%E7%BB%A7%E6%89%BF/" title="十三、类继承">https://hakuya.me/learning/programlanguage/cpp/十三、类继承/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/learning/japanese/primary/%E4%BA%8C%E3%80%81%E5%B0%8F%E6%9D%8E%E7%9A%84%E5%85%AC%E5%8F%B8%E7%94%9F%E6%B4%BB%E2%91%A0/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;wallpaper-1255596461.cos.ap-nanjing.myqcloud.com&#x2F;wallpaper (3).jpg" title="二、小李的公司生活①"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 日语初级</span><h3>二、小李的公司生活①</h3></a></div><div class="item right"><a href="/learning/programlanguage/cpp/%E5%8D%81%E5%9B%9B%E3%80%81C++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;wallpaper-1255596461.cos.ap-nanjing.myqcloud.com&#x2F;wallpaper_4.jpg" title="十四、C++中的代码重用"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> cpp</span><h3>十四、C++中的代码重用</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB%E7%BB%A7%E6%89%BF"><span class="toc-number">1.</span> <span class="toc-text">类继承</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%9F%BA%E7%B1%BB"><span class="toc-number">1.1.</span> <span class="toc-text">一个简单的基类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E6%B4%BE%E7%94%9F%E7%B1%BB"><span class="toc-number">1.1.1.</span> <span class="toc-text">生成一个派生类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E5%9C%A8%E7%BB%A7%E6%89%BF%E7%89%B9%E6%80%A7%E4%B8%AD%E5%8A%A0%E5%85%A5%E4%BA%9B%E4%BB%80%E4%B9%88%E5%91%A2"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">需要在继承特性中加入些什么呢🤔?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A9%E6%88%91%E4%BB%AC%E6%9D%A5%E5%8A%A0%E4%B8%AA%E7%A0%81%E4%BB%A3%E7%A0%81%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">让我们来加个码代码的接口：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E8%80%83%E8%99%91"><span class="toc-number">1.1.2.</span> <span class="toc-text">构造函数：访问权限考虑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.3.</span> <span class="toc-text">析构函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%B4%BE%E7%94%9F%E7%B1%BB"><span class="toc-number">1.1.4.</span> <span class="toc-text">使用派生类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B4%BE%E7%94%9F%E7%B1%BB%E5%92%8C%E5%9F%BA%E7%B1%BB%E4%B9%8B%E9%97%B4%E7%9A%84%E7%89%B9%E6%AE%8A%E5%85%B3%E7%B3%BB"><span class="toc-number">1.1.5.</span> <span class="toc-text">派生类和基类之间的特殊关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BFis-a-%E5%85%B3%E7%B3%BB"><span class="toc-number">1.2.</span> <span class="toc-text">继承：is-a 关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E6%80%81%E5%85%AC%E6%9C%89%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.</span> <span class="toc-text">多态公有继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.1.</span> <span class="toc-text">虚析构函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%81%94%E7%BC%96%E5%92%8C%E5%8A%A8%E6%80%81%E8%81%94%E7%BC%96"><span class="toc-number">1.4.</span> <span class="toc-text">静态联编和动态联编</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%85%BC%E5%AE%B9"><span class="toc-number">1.4.1.</span> <span class="toc-text">指针和引用类型的兼容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E5%92%8C%E5%8A%A8%E6%80%81%E8%81%94%E7%BC%96"><span class="toc-number">1.4.2.</span> <span class="toc-text">虚成员函数和动态联编</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89%E4%B8%A4%E7%A7%8D%E4%B8%8D%E5%90%8C%E7%9A%84%E8%81%94%E7%BC%96%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">为什么会有两种不同的联编方式❓</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E5%87%BD%E6%95%B0%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">虚函数的工作原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E8%99%9A%E5%87%BD%E6%95%B0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.4.3.</span> <span class="toc-text">关于虚函数注意事项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">构造函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0-2"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">析构函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8B%E5%85%83"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">友元</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B4%BE%E7%94%9F%E7%B1%BB%E6%B2%A1%E6%9C%89%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89%E8%99%9A%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.3.4.</span> <span class="toc-text">派生类没有重新定义虚函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89%E5%B0%86%E9%9A%90%E8%97%8F%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.3.5.</span> <span class="toc-text">重新定义将隐藏方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6protected"><span class="toc-number">1.5.</span> <span class="toc-text">访问控制：protected</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%87%E6%80%BB"><span class="toc-number">1.5.1.</span> <span class="toc-text">汇总：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%9F%BA%E7%B1%BB"><span class="toc-number">1.6.</span> <span class="toc-text">抽象基类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="toc-number">1.6.0.1.</span> <span class="toc-text">纯虚函数的声明：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%92%8C%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D"><span class="toc-number">1.7.</span> <span class="toc-text">继承和动态内存分配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%B1%9E%E6%80%A7%E7%BB%A7%E6%89%BF"><span class="toc-number">1.8.</span> <span class="toc-text">成员属性继承：</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/learning/programlanguage/cpp/%E5%9B%9B%E3%80%81%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B/" rel="bookmark" title="四、复合类型">四、复合类型</a></li><li><a href="/learning/programlanguage/cpp/%E5%85%AD%E3%80%81%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5%E5%92%8C%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="bookmark" title="六、分支语句和逻辑表达式">六、分支语句和逻辑表达式</a></li><li><a href="/learning/programlanguage/cpp/%E4%BA%94%E3%80%81%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%85%B3%E7%B3%BB%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="bookmark" title="五、循环和关系表达式">五、循环和关系表达式</a></li><li><a href="/learning/programlanguage/cpp/%E4%B8%89%E3%80%81%E6%96%87%E4%BB%B6%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/" rel="bookmark" title="三、文件输入输出">三、文件输入输出</a></li><li><a href="/learning/programlanguage/cpp/%E4%B8%83%E3%80%81%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/" rel="bookmark" title="七、函数指针">七、函数指针</a></li><li><a href="/learning/programlanguage/cpp/%E5%85%AB%E3%80%81%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/" rel="bookmark" title="八、函数介绍">八、函数介绍</a></li><li><a href="/learning/programlanguage/cpp/%E4%B9%9D%E3%80%81%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/" rel="bookmark" title="九、内存模型和名称空间">九、内存模型和名称空间</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E3%80%81%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB/" rel="bookmark" title="十、对象和类">十、对象和类</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E7%B1%BB/" rel="bookmark" title="十一、使用类">十一、使用类</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%BA%8C%E3%80%81%E7%B1%BB%E5%92%8C%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" rel="bookmark" title="十二、类和动态内存分配">十二、类和动态内存分配</a></li><li class="active"><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%89%E3%80%81%E7%B1%BB%E7%BB%A7%E6%89%BF/" rel="bookmark" title="十三、类继承">十三、类继承</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E5%9B%9B%E3%80%81C++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/" rel="bookmark" title="十四、C++中的代码重用">十四、C++中的代码重用</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%BA%94%E3%80%81%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/" rel="bookmark" title="十五、友元、异常和其他">十五、友元、异常和其他</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E5%85%AD%E3%80%81string%20%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/" rel="bookmark" title="十六、string 类和标准模板库">十六、string 类和标准模板库</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%83%E3%80%81%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA%E5%92%8C%E6%96%87%E4%BB%B6/" rel="bookmark" title="十七、输入、输出和文件">十七、输入、输出和文件</a></li><li><a href="/learning/programlanguage/cpp/%E5%8D%81%E5%85%AB%E3%80%81C++11%E6%96%B0%E5%8A%9F%E8%83%BD/" rel="bookmark" title="十八、C++11新功能">十八、C++11新功能</a></li><li><a href="/learning/programlanguage/cpp/%E6%9D%82%E9%A1%B9/" rel="bookmark" title="杂项">杂项</a></li><li><a href="/learning/programlanguage/cpp/C++%E4%B8%AD%E7%9A%84extern/" rel="bookmark" title="C++中的extern">C++中的extern</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="鑫酱(●'◡'●)" data-src="/images/avatar.jpg"><p class="name" itemprop="name">鑫酱(●'◡'●)</p><div class="description" itemprop="description">整天摸鱼，却妄想拯救世界的技术宅</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">110</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">25</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">67</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FsbGVuR1g=" title="https:&#x2F;&#x2F;github.com&#x2F;AllenGX"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTgwNTM4MjQy" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;80538242"><i class="ic i-cloud-music"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjE0MTM5MDcxNTNAcXEuY29t" title="mailto:1413907153@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>好友</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>网址</a></li><li class="item"><a href="/travellings/" rel="section"><i class="ic i-paper-plane"></i>传送门</a></li><li class="item"><a href="/mikutap/" rel="section"><i class="ic i-star"></i>Mikutap</a></li><li class="item"><a href="/restart/" rel="section"><i class="ic i-sun"></i>RestartLife</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/learning/japanese/primary/%E4%BA%8C%E3%80%81%E5%B0%8F%E6%9D%8E%E7%9A%84%E5%85%AC%E5%8F%B8%E7%94%9F%E6%B4%BB%E2%91%A0/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/learning/programlanguage/cpp/%E5%8D%81%E5%9B%9B%E3%80%81C++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%89%E3%80%81%E7%B1%BB%E7%BB%A7%E6%89%BF/" title="十三、类继承">十三、类继承</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/aoi/" title="分类于 aoi">aoi</a></div><span><a href="/learning/aoi/%E6%B5%85%E8%B0%88AOI/" title="浅谈AOI">浅谈AOI</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%B8%83%E3%80%81%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA%E5%92%8C%E6%96%87%E4%BB%B6/" title="十七、输入、输出和文件">十七、输入、输出和文件</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game101/" title="分类于 Games101图形渲染">Games101图形渲染</a></div><span><a href="/learning/games/Game101/%E4%BA%8C%E5%8D%81%E4%BA%8C%E3%80%81Physical%20Basis%20of%20Color/" title="二十二、Physical Basis of Color">二十二、Physical Basis of Color</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game101/" title="分类于 Games101图形渲染">Games101图形渲染</a></div><span><a href="/learning/games/Game101/%E5%8D%81%E5%9B%9B%E3%80%81Ray%20Tracing%20&&%20Rasterization/" title="十四、Ray Tracing &amp;&amp; Rasterization">十四、Ray Tracing && Rasterization</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E5%8D%81%E4%BA%8C%E3%80%81%E7%B1%BB%E5%92%8C%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" title="十二、类和动态内存分配">十二、类和动态内存分配</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game101/" title="分类于 Games101图形渲染">Games101图形渲染</a></div><span><a href="/learning/games/Game101/%E4%B9%9D%E3%80%81Shading%EF%BC%88%E4%B8%8B%EF%BC%89%E2%80%94%E2%80%94Texture%20Mapping%20Cont/" title="九、Shading（下）——Texture Mapping Cont">九、Shading（下）——Texture Mapping Cont</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%B9%B4%E6%8A%A5/" title="分类于 年报">年报</a></div><span><a href="/annals/2023%E5%B9%B4%E6%8A%A5/" title="2023年报">2023年报</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/" title="分类于 Games系列">Games系列</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/games/Game202/" title="分类于 GAME202高质量实时渲染">GAME202高质量实时渲染</a></div><span><a href="/learning/games/Game202/%E4%B8%80%E3%80%81Recap%20of%20CG%20Basics/" title="一、Recap of CG Basics">一、Recap of CG Basics</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/learning/" title="分类于 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/categories/learning/programlanguage/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/learning/programlanguage/cpp/%E5%85%AB%E3%80%81%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/" title="八、函数介绍">八、函数介绍</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">鑫酱(●'◡'●) @ 个人博客</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">639k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">9:41</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"learning/programlanguage/cpp/十三、类继承/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/animejs@3.2.0/lib/anime.min.js,npm/katex@0.12.0/dist/contrib/copy-tex.min.js,npm/frappe-charts@1.5.0/dist/frappe-charts.min.iife.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/quicklink@2/dist/quicklink.umd.js,gh/amehime/MiniValine@4.2.2-beta10/dist/MiniValine.min.js"></script><script src="/js/app.js?v=0.2.5"></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b6d809b500bd6f0040117088899bc7bf";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html>